<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/icons8-%E7%8C%AB-32-4.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/icons8-%E7%8C%AB-16-4.ico"><link rel="mask-icon" href="/images/logo.svg" color="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fonts.loli.net/css?family=EB Garamond:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css"><script src="/lib/pace/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"ycchen00.github.io",root:"/",scheme:"Gemini",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!1},bookmark:{enable:!0,color:"#222",save:"auto"},fancybox:!0,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="不错的入门笔记。记录下Pandas中有关DataFrame常用的函数，包括数据读取、清理和可视化。防丢失,同SQL4DS笔记~"><meta property="og:type" content="article"><meta property="og:title" content="Pandas | DataFrame的常用函数"><meta property="og:url" content="https://ycchen00.github.io/2021/03/27/DSci/DataFrame%E7%9A%84%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0(DVwP%E7%AC%94%E8%AE%B0)/index.html"><meta property="og:site_name" content="猫咪的小鱼干"><meta property="og:description" content="不错的入门笔记。记录下Pandas中有关DataFrame常用的函数，包括数据读取、清理和可视化。防丢失,同SQL4DS笔记~"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://s3-api.us-geo.objectstorage.softlayer.net/cf-courses-data/CognitiveClass/DV0101EN/labs/Images/Mod3Fig4SplitApplyCombine.png"><meta property="og:image" content="https://img-blog.csdnimg.cn/20201229130933585.png#pic_center"><meta property="og:image" content="https://s3-api.us-geo.objectstorage.softlayer.net/cf-courses-data/CognitiveClass/DV0101EN/labs/Images/Mod3Fig5Subplots_V2.png"><meta property="og:image" content="https://img-blog.csdnimg.cn/20201229124555341.png#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20201229124651288.png#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20201229125253445.png#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20201229125324619.png#pic_center"><meta property="og:image" content="https://s3-api.us-geo.objectstorage.softlayer.net/cf-courses-data/CognitiveClass/DV0101EN/labs/Images/boxplot_complete.png"><meta property="og:image" content="https://img-blog.csdnimg.cn/20201229125727635.png#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/2020122912591079.png#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20201229130512425.png#pic_center"><meta property="og:image" content="https://s3-api.us-geo.objectstorage.softlayer.net/cf-courses-data/CognitiveClass/DV0101EN/labs/Images/Mod3Fig3FeatureScaling.png"><meta property="og:image" content="https://img-blog.csdnimg.cn/20201229131825222.png#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20201229173857413.png#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20201229174239269.png#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20201229174303150.png#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20201229174319526.png#pic_center"><meta property="article:published_time" content="2021-03-27T14:43:28.855Z"><meta property="article:modified_time" content="2021-03-27T14:43:28.855Z"><meta property="article:author" content="买猫咪的小鱼干"><meta property="article:tag" content="DataScience"><meta property="article:tag" content="Pandas"><meta property="article:tag" content="DataFrame"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://s3-api.us-geo.objectstorage.softlayer.net/cf-courses-data/CognitiveClass/DV0101EN/labs/Images/Mod3Fig4SplitApplyCombine.png"><link rel="canonical" href="https://ycchen00.github.io/2021/03/27/DSci/DataFrame%E7%9A%84%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0(DVwP%E7%AC%94%E8%AE%B0)/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><script>window.addEventListener('DOMContentLoaded', () => {
    'use strict';
    
      if (NexT.utils.hasMobileUA()) return;
    
    let time, hidden, visible, title = document.title;
    let favicon = document.querySelector('link[rel="icon"]');
    
      hidden = '╭(°A°`)╮猫咪出门啦~';
      visible = 'o(=•ェ•=)m猫咪又回来啦~';
    
    let random = t => t[Math.floor(Math.random() * t.length)];
    const change = () => {
      if (document.hidden) {
        favicon.setAttribute('href', '/images/icons8-猫屁股-16.png');
        
          document.title = hidden;
        
        clearTimeout(time);
      } else {
        favicon.setAttribute('href', '/images/icons8-猫-16-4.ico');
        
          document.title = visible;
        
        time = setTimeout(() => {
          document.title = title;
        }, 2020);
      }
    }
    document.addEventListener('visibilitychange', change, false);
  });</script><title>Pandas | DataFrame的常用函数 | 猫咪的小鱼干</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="猫咪的小鱼干" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">猫咪的小鱼干</h1><span class="logo-line-after"><i></i></span></a></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-movies"><a href="/movies/" rel="section"><i class="fas fa-film fa-fw"></i>观影</a></li><li class="menu-item menu-item-books"><a href="/books/" rel="section"><i class="fas fa-book fa-fw"></i>阅读</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class="reading-progress-bar"></div><a role="button" class="book-mark-link book-mark-link-fixed"></a> <a href="https://github.com/ycchen00" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://ycchen00.github.io/2021/03/27/DSci/DataFrame%E7%9A%84%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0(DVwP%E7%AC%94%E8%AE%B0)/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar_blackRainbow.jpg"><meta itemprop="name" content="买猫咪的小鱼干"><meta itemprop="description" content="overthinker"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="猫咪的小鱼干"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Pandas | DataFrame的常用函数<a href="https://github.com/ycchen00/ycchen00.github.io/tree/hexo/source/_posts/DSci/DataFrame%E7%9A%84%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0(DVwP%E7%AC%94%E8%AE%B0).md" class="post-edit-link" title="编辑" rel="noopener" target="_blank"><i class="fa fa-pencil-alt"></i></a></h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2021-03-27 22:43:28" itemprop="dateCreated datePublished" datetime="2021-03-27T22:43:28+08:00">2021-03-27</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/DSci/" itemprop="url" rel="index"><span itemprop="name">DSci</span></a> </span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/DSci/Pandas/" itemprop="url" rel="index"><span itemprop="name">Pandas</span></a> </span></span><span id="/2021/03/27/DSci/DataFrame%E7%9A%84%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0(DVwP%E7%AC%94%E8%AE%B0)/" class="post-meta-item leancloud_visitors" data-flag-title="Pandas | DataFrame的常用函数" title="热度"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">热度：</span> <span class="leancloud-visitors-count"></span> <span>℃</span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Disqus：</span> <a title="disqus" href="/2021/03/27/DSci/DataFrame%E7%9A%84%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0(DVwP%E7%AC%94%E8%AE%B0)/#disqus_thread" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2021/03/27/DSci/DataFrame的常用函数(DVwP笔记)/" itemprop="commentCount"></span></a></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>32k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>29 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="DataFrame"><a href="#DataFrame" class="headerlink" title="DataFrame"></a>DataFrame</h1><h2 id="Read-in-data"><a href="#Read-in-data" class="headerlink" title="Read in data"></a>Read in data</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">df_can = pd.read_excel(<span class="string">&#x27;https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork/Data%20Files/Canada.xlsx&#x27;</span>,</span><br><span class="line">                        sheet_name=<span class="string">&#x27;Canada by Citizenship&#x27;</span>,</span><br><span class="line">                       skiprows=<span class="built_in">range</span>(<span class="number">20</span>),</span><br><span class="line">                       skipfooter=<span class="number">2</span>)</span><br></pre></td></tr></table></figure><h2 id="View-the-top-5-rows"><a href="#View-the-top-5-rows" class="headerlink" title="View the top 5 rows"></a>View the top 5 rows</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df_can.head()</span><br><span class="line"><span class="comment"># tip: You can specify the number of rows you&#x27;d like to see as follows: df_can.head(10) </span></span><br></pre></td></tr></table></figure><h2 id="Veiw-the-bottom-5-rows"><a href="#Veiw-the-bottom-5-rows" class="headerlink" title="Veiw the bottom 5 rows"></a>Veiw the bottom 5 rows</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_can.tail()</span><br></pre></td></tr></table></figure><h2 id="Get-a-summary-of-dataframe"><a href="#Get-a-summary-of-dataframe" class="headerlink" title="Get a summary of dataframe"></a>Get a summary of dataframe</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_can.info(verbose=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure><h2 id="Get-the-list-of-column-headers"><a href="#Get-the-list-of-column-headers" class="headerlink" title="Get the list of column headers"></a>Get the list of column headers</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_can.columns.values </span><br></pre></td></tr></table></figure><h2 id="Get-the-list-of-indicies"><a href="#Get-the-list-of-indicies" class="headerlink" title="Get the list of indicies"></a>Get the list of indicies</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_can.index.values</span><br></pre></td></tr></table></figure><p>Note: The default type of index and columns is NOT list.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="built_in">type</span>(df_can.columns))</span><br><span class="line">print(<span class="built_in">type</span>(df_can.index))</span><br></pre></td></tr></table></figure><pre><code>&lt;class &#39;pandas.core.indexes.base.Index&#39;&gt;
&lt;class &#39;pandas.core.indexes.range.RangeIndex&#39;&gt;</code></pre><h2 id="Get-the-index-and-columns-as-lists"><a href="#Get-the-index-and-columns-as-lists" class="headerlink" title="Get the index and columns as lists"></a>Get the index and columns as lists</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">df_can.columns.tolist()</span><br><span class="line">df_can.index.tolist()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> (<span class="built_in">type</span>(df_can.columns.tolist()))</span><br><span class="line"><span class="built_in">print</span> (<span class="built_in">type</span>(df_can.index.tolist()))</span><br></pre></td></tr></table></figure><pre><code>&lt;class &#39;list&#39;&gt;
&lt;class &#39;list&#39;&gt;</code></pre><h2 id="View-the-dimensions-of-the-dataframe"><a href="#View-the-dimensions-of-the-dataframe" class="headerlink" title="View the dimensions of the dataframe"></a>View the dimensions of the dataframe</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># size of dataframe (rows, columns)</span></span><br><span class="line">df_can.shape    </span><br></pre></td></tr></table></figure><h2 id="Remove-columns"><a href="#Remove-columns" class="headerlink" title="Remove columns"></a>Remove columns</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># in pandas axis=0 represents rows (default) and axis=1 represents columns.</span></span><br><span class="line">df_can.drop([<span class="string">&#x27;AREA&#x27;</span>,<span class="string">&#x27;REG&#x27;</span>,<span class="string">&#x27;DEV&#x27;</span>,<span class="string">&#x27;Type&#x27;</span>,<span class="string">&#x27;Coverage&#x27;</span>], axis=<span class="number">1</span>, inplace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><h2 id="Rename-columns"><a href="#Rename-columns" class="headerlink" title="Rename columns"></a>Rename columns</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_can.rename(columns=&#123;<span class="string">&#x27;OdName&#x27;</span>:<span class="string">&#x27;Country&#x27;</span>, <span class="string">&#x27;AreaName&#x27;</span>:<span class="string">&#x27;Continent&#x27;</span>, <span class="string">&#x27;RegName&#x27;</span>:<span class="string">&#x27;Region&#x27;</span>&#125;, inplace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><h2 id="Add-a-column-that-sums-up-the-total-columns"><a href="#Add-a-column-that-sums-up-the-total-columns" class="headerlink" title="Add a column that sums up the total columns"></a>Add a column that sums up the total columns</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_can[<span class="string">&#x27;Total&#x27;</span>] = df_can.<span class="built_in">sum</span>(axis=<span class="number">1</span>)</span><br></pre></td></tr></table></figure><h2 id="See-how-many-null-objects"><a href="#See-how-many-null-objects" class="headerlink" title="See how many null objects"></a>See how many null objects</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_can.isnull().<span class="built_in">sum</span>()</span><br></pre></td></tr></table></figure><h2 id="Get-a-quick-summary-of-each-column"><a href="#Get-a-quick-summary-of-each-column" class="headerlink" title="Get a quick summary of each column"></a>Get a quick summary of each column</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_can.describe()</span><br></pre></td></tr></table></figure><h2 id="Set-index"><a href="#Set-index" class="headerlink" title="Set index"></a>Set index</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df_can.set_index(<span class="string">&#x27;Country&#x27;</span>, inplace=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># tip: The opposite of set is reset. So to reset the index, we can use df_can.reset_index()</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># optional: to remove the name of the index</span></span><br><span class="line">df_can.index.name = <span class="literal">None</span></span><br></pre></td></tr></table></figure><h2 id="Select-column"><a href="#Select-column" class="headerlink" title="Select column"></a>Select column</h2><p><strong>There are two ways to filter on a column name:</strong></p><p>Method 1: Quick and easy, but only works if the column name does NOT have spaces or special characters.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df.column_name </span><br><span class="line">    (returns series)</span><br></pre></td></tr></table></figure><p>Method 2: More robust, and can filter on multiple columns.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">&#x27;column&#x27;</span>]  </span><br><span class="line">    (returns series)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df[[<span class="string">&#x27;column 1&#x27;</span>, <span class="string">&#x27;column 2&#x27;</span>]] </span><br><span class="line">    (returns dataframe)</span><br></pre></td></tr></table></figure><hr><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_can.Country  <span class="comment"># returns a series</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">df_can[[<span class="string">&#x27;Country&#x27;</span>, <span class="number">1980</span>, <span class="number">1981</span>, <span class="number">1982</span>, <span class="number">1983</span>, <span class="number">1984</span>, <span class="number">1985</span>]] <span class="comment"># returns a dataframe</span></span><br><span class="line"><span class="comment"># notice that &#x27;Country&#x27; is string, and the years are integers. </span></span><br><span class="line"><span class="comment"># for the sake of consistency, we will convert all column names to string later on.</span></span><br></pre></td></tr></table></figure><h2 id="Select-row"><a href="#Select-row" class="headerlink" title="Select row"></a>Select row</h2><p>There are main 3 ways to select rows:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">df.loc[label]        </span><br><span class="line">    <span class="comment">#filters by the labels of the index/column</span></span><br><span class="line">df.iloc[index]       </span><br><span class="line">    <span class="comment">#filters by the positions of the index/column</span></span><br></pre></td></tr></table></figure><hr><p>after set the index</p><p>Example: Let’s view the number of immigrants from Japan (row 87) for the following scenarios:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. The full row data (all columns)</span><br><span class="line">2. For year 2013</span><br><span class="line">3. For years 1980 to 1985</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. the full row data (all columns)</span></span><br><span class="line">print(df_can.loc[<span class="string">&#x27;Japan&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># alternate methods</span></span><br><span class="line">print(df_can.iloc[<span class="number">87</span>])</span><br><span class="line">print(df_can[df_can.index == <span class="string">&#x27;Japan&#x27;</span>].T.squeeze())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. for year 2013</span></span><br><span class="line">print(df_can.loc[<span class="string">&#x27;Japan&#x27;</span>, <span class="number">2013</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># alternate method</span></span><br><span class="line">print(df_can.iloc[<span class="number">87</span>, <span class="number">36</span>]) <span class="comment"># year 2013 is the last column, with a positional index of 36</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. for years 1980 to 1985</span></span><br><span class="line">print(df_can.loc[<span class="string">&#x27;Japan&#x27;</span>, [<span class="number">1980</span>, <span class="number">1981</span>, <span class="number">1982</span>, <span class="number">1983</span>, <span class="number">1984</span>, <span class="number">1984</span>]])</span><br><span class="line">print(df_can.iloc[<span class="number">87</span>, [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]])</span><br></pre></td></tr></table></figure><h2 id="Sort-on-a-column"><a href="#Sort-on-a-column" class="headerlink" title="Sort on a column"></a>Sort on a column</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#inplace = True paramemter saves the changes to the original df_can dataframe</span></span><br><span class="line">df_can.sort_values(by=<span class="string">&#x27;Total&#x27;</span>, ascending=<span class="literal">False</span>, axis=<span class="number">0</span>, inplace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><h2 id="Convert-the-column-names-into-strings"><a href="#Convert-the-column-names-into-strings" class="headerlink" title="Convert the column names into strings"></a>Convert the column names into strings</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df_can.columns = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">str</span>, df_can.columns))</span><br><span class="line"><span class="comment"># [print (type(x)) for x in df_can.columns.values] #&lt;-- uncomment to check type of column headers</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># declare a variable that will allow us to easily call upon the full range of years</span></span><br><span class="line"><span class="comment"># useful for plotting later on</span></span><br><span class="line">years = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">str</span>, <span class="built_in">range</span>(<span class="number">1980</span>, <span class="number">2014</span>)))</span><br><span class="line">years</span><br></pre></td></tr></table></figure><h2 id="Filtering-based-on-a-criteria"><a href="#Filtering-based-on-a-criteria" class="headerlink" title="Filtering based on a criteria"></a>Filtering based on a criteria</h2><p>To filter the dataframe based on a condition, we simply pass the condition as a boolean vector.<br>For example, Let’s filter the dataframe to show the data on Asian countries (AreaName = Asia)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. create the condition boolean series</span></span><br><span class="line">condition = df_can[<span class="string">&#x27;Continent&#x27;</span>] == <span class="string">&#x27;Asia&#x27;</span></span><br><span class="line">print(condition)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. pass this condition into the dataFrame</span></span><br><span class="line">df_can[condition]</span><br><span class="line"></span><br><span class="line"><span class="comment"># we can pass mutliple criteria in the same line. </span></span><br><span class="line"><span class="comment"># let&#x27;s filter for AreaNAme = Asia and RegName = Southern Asia</span></span><br><span class="line"></span><br><span class="line">df_can[(df_can[<span class="string">&#x27;Continent&#x27;</span>]==<span class="string">&#x27;Asia&#x27;</span>) &amp; (df_can[<span class="string">&#x27;Region&#x27;</span>]==<span class="string">&#x27;Southern Asia&#x27;</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># note: When using &#x27;and&#x27; and &#x27;or&#x27; operators, pandas requires we use &#x27;&amp;&#x27; and &#x27;|&#x27; instead of &#x27;and&#x27; and &#x27;or&#x27;</span></span><br><span class="line"><span class="comment"># don&#x27;t forget to enclose the two conditions in parentheses</span></span><br></pre></td></tr></table></figure><h2 id="Transpose-the-dataframe"><a href="#Transpose-the-dataframe" class="headerlink" title="Transpose the dataframe"></a>Transpose the dataframe</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_CI = df_CI.transpose()</span><br></pre></td></tr></table></figure><h2 id="Groupby"><a href="#Groupby" class="headerlink" title="Groupby"></a>Groupby</h2><p>The general process of <code>groupby</code> involves the following steps:</p><ol><li><strong>Split:</strong> Splitting the data into groups based on some criteria.</li><li><strong>Apply:</strong> Applying a function to each group independently:<br>.sum()<br>.count()<br>.mean()<br>.std()<br>.aggregate()<br>.apply()<br>.etc..</li><li><strong>Combine:</strong> Combining the results into a data structure.</li></ol><img src="https://s3-api.us-geo.objectstorage.softlayer.net/cf-courses-data/CognitiveClass/DV0101EN/labs/Images/Mod3Fig4SplitApplyCombine.png" height="400" align="center"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># group countries by continents and apply sum() function </span></span><br><span class="line">df_continents = df_can.groupby(<span class="string">&#x27;Continent&#x27;</span>, axis=<span class="number">0</span>).<span class="built_in">sum</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># note: the output of the groupby method is a `groupby&#x27; object. </span></span><br><span class="line"><span class="comment"># we can not use it further until we apply a function (eg .sum())</span></span><br><span class="line">print(<span class="built_in">type</span>(df_can.groupby(<span class="string">&#x27;Continent&#x27;</span>, axis=<span class="number">0</span>)))</span><br><span class="line"></span><br><span class="line">df_continents.head()</span><br></pre></td></tr></table></figure><h2 id="polyfit"><a href="#polyfit" class="headerlink" title="polyfit()"></a>polyfit()</h2><p>Get the equation of line of best fit. We will use <strong>Numpy</strong>‘s <code>polyfit()</code> method by passing in the following:</p><ul><li><code>x</code>: x-coordinates of the data.</li><li><code>y</code>: y-coordinates of the data.</li><li><code>deg</code>: Degree of fitting polynomial. 1 = linear, 2 = quadratic, and so on.</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x = df_tot[<span class="string">&#x27;year&#x27;</span>]      <span class="comment"># year on x-axis</span></span><br><span class="line">y = df_tot[<span class="string">&#x27;total&#x27;</span>]     <span class="comment"># total on y-axis</span></span><br><span class="line">fit = np.polyfit(x, y, deg=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">fit</span><br></pre></td></tr></table></figure><pre><code>array([ 5.56709228e+03, -1.09261952e+07])</code></pre><p>The output is an array with the polynomial coefficients, highest powers first. Since we are plotting a linear regression <code>y= a*x + b</code>, our output has 2 elements <code>[5.56709228e+03, -1.09261952e+07]</code> with the the slope in position 0 and intercept in position 1.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">df_tot.plot(kind=<span class="string">&#x27;scatter&#x27;</span>, x=<span class="string">&#x27;year&#x27;</span>, y=<span class="string">&#x27;total&#x27;</span>, figsize=(<span class="number">10</span>, <span class="number">6</span>), color=<span class="string">&#x27;darkblue&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&#x27;Total Immigration to Canada from 1980 - 2013&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Year&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Number of Immigrants&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot line of best fit</span></span><br><span class="line">plt.plot(x, fit[<span class="number">0</span>] * x + fit[<span class="number">1</span>], color=<span class="string">&#x27;red&#x27;</span>) <span class="comment"># recall that x is the Years</span></span><br><span class="line">plt.annotate(<span class="string">&#x27;y=&#123;0:.0f&#125; x + &#123;1:.0f&#125;&#x27;</span>.<span class="built_in">format</span>(fit[<span class="number">0</span>], fit[<span class="number">1</span>]), xy=(<span class="number">2000</span>, <span class="number">150000</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># print out the line of best fit</span></span><br><span class="line"><span class="string">&#x27;No. Immigrants = &#123;0:.0f&#125; * Year + &#123;1:.0f&#125;&#x27;</span>.<span class="built_in">format</span>(fit[<span class="number">0</span>], fit[<span class="number">1</span>]) </span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20201229130933585.png#pic_center"></p><h1 id="Visualization"><a href="#Visualization" class="headerlink" title="Visualization"></a>Visualization</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># %matplotlib inline #强制渲染 新窗口 不可添加新元素</span></span><br><span class="line">%matplotlib notebook <span class="comment">#动态渲染 </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># print (&#x27;Matplotlib version: &#x27;, mpl.__version__) # &gt;= 2.0.0</span></span><br><span class="line"><span class="comment"># print(plt.style.available)</span></span><br><span class="line">mpl.style.use([<span class="string">&#x27;ggplot&#x27;</span>]) <span class="comment"># optional: for ggplot-like style</span></span><br></pre></td></tr></table></figure><h2 id="Colors-available"><a href="#Colors-available" class="headerlink" title="Colors available"></a>Colors available</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line"><span class="keyword">for</span> name, <span class="built_in">hex</span> <span class="keyword">in</span> matplotlib.colors.cnames.items():</span><br><span class="line">    print(name, <span class="built_in">hex</span>)</span><br></pre></td></tr></table></figure><h2 id="Two-types-of-plotting"><a href="#Two-types-of-plotting" class="headerlink" title="Two types of plotting"></a>Two types of plotting</h2><p>As we discussed in the video lectures, there are two styles/options of ploting with <code>matplotlib</code>. Plotting using the Artist layer and plotting using the scripting layer.</p><p><strong>Option 1: Scripting layer (procedural method) - using matplotlib.pyplot as ‘plt’</strong></p><p>You can use <code>plt</code> i.e. <code>matplotlib.pyplot</code> and add more elements by calling different methods procedurally; for example, <code>plt.title(...)</code> to add title or <code>plt.xlabel(...)</code> to add label to the x-axis.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Option 1: This is what we have been using so far</span></span><br><span class="line">df_top5.plot(kind=<span class="string">&#x27;area&#x27;</span>, alpha=<span class="number">0.35</span>, figsize=(<span class="number">20</span>, <span class="number">10</span>)) </span><br><span class="line">plt.title(<span class="string">&#x27;Immigration trend of top 5 countries&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Number of immigrants&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Years&#x27;</span>)</span><br></pre></td></tr></table></figure><p><strong>Option 2: Artist layer (Object oriented method) - using an <code>Axes</code> instance from Matplotlib (preferred)</strong></p><p>You can use an <code>Axes</code> instance of your current plot and store it in a variable (eg. <code>ax</code>). You can add more elements by calling methods with a little change in syntax (by adding “_set__” to the previous methods). For example, use <code>ax.set_title()</code> instead of <code>plt.title()</code> to add title, or <code>ax.set_xlabel()</code> instead of <code>plt.xlabel()</code> to add label to the x-axis.</p><p>This option sometimes is more transparent and flexible to use for advanced plots (in particular when having multiple plots).</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># option 2: preferred option with more flexibility</span></span><br><span class="line">ax = df_top5.plot(kind=<span class="string">&#x27;area&#x27;</span>, alpha=<span class="number">0.35</span>, figsize=(<span class="number">20</span>, <span class="number">10</span>))</span><br><span class="line"></span><br><span class="line">ax.set_title(<span class="string">&#x27;Immigration Trend of Top 5 Countries&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;Number of Immigrants&#x27;</span>)</span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;Years&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="Subplots"><a href="#Subplots" class="headerlink" title="Subplots"></a>Subplots</h2><p>To visualize multiple plots together, we can create a <strong><code>figure</code></strong> (overall canvas) and divide it into <strong><code>subplots</code></strong>, each containing a plot. With <strong>subplots</strong>, we usually work with the <strong>artist layer</strong> instead of the <strong>scripting layer</strong>.</p><p>Typical syntax is :<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure() <span class="comment"># create figure</span></span><br><span class="line">ax = fig.add_subplot(nrows, ncols, plot_number) <span class="comment"># create subplots</span></span><br></pre></td></tr></table></figure><p>Where</p><ul><li><code>nrows</code> and <code>ncols</code> are used to notionally split the figure into (<code>nrows</code> * <code>ncols</code>) sub-axes,</li><li><code>plot_number</code> is used to identify the particular subplot that this function is to create within the notional grid. <code>plot_number</code> starts at 1, increments across rows first and has a maximum of <code>nrows</code> * <code>ncols</code> as shown below.</li></ul><img src="https://s3-api.us-geo.objectstorage.softlayer.net/cf-courses-data/CognitiveClass/DV0101EN/labs/Images/Mod3Fig5Subplots_V2.png" width="500" align="center"><p>We can then specify which subplot to place each plot by passing in the <code>ax</code> paramemter in <code>plot()</code> method as follows:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure() <span class="comment"># create figure</span></span><br><span class="line"></span><br><span class="line">ax0 = fig.add_subplot(<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>) <span class="comment"># add subplot 1 (1 row, 2 columns, first plot)</span></span><br><span class="line">ax1 = fig.add_subplot(<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>) <span class="comment"># add subplot 2 (1 row, 2 columns, second plot). See tip below**</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Subplot 1: Box plot</span></span><br><span class="line">df_CI.plot(kind=<span class="string">&#x27;box&#x27;</span>, color=<span class="string">&#x27;blue&#x27;</span>, vert=<span class="literal">False</span>, figsize=(<span class="number">20</span>, <span class="number">6</span>), ax=ax0) <span class="comment"># add to subplot 1</span></span><br><span class="line">ax0.set_title(<span class="string">&#x27;Box Plots of Immigrants from China and India (1980 - 2013)&#x27;</span>)</span><br><span class="line">ax0.set_xlabel(<span class="string">&#x27;Number of Immigrants&#x27;</span>)</span><br><span class="line">ax0.set_ylabel(<span class="string">&#x27;Countries&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Subplot 2: Line plot</span></span><br><span class="line">df_CI.plot(kind=<span class="string">&#x27;line&#x27;</span>, figsize=(<span class="number">20</span>, <span class="number">6</span>), ax=ax1) <span class="comment"># add to subplot 2</span></span><br><span class="line">ax1.set_title (<span class="string">&#x27;Line Plots of Immigrants from China and India (1980 - 2013)&#x27;</span>)</span><br><span class="line">ax1.set_ylabel(<span class="string">&#x27;Number of Immigrants&#x27;</span>)</span><br><span class="line">ax1.set_xlabel(<span class="string">&#x27;Years&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># plt.show()</span></span><br></pre></td></tr></table></figure><p><strong>Tip regarding subplot convention</strong></p><p>In the case when <code>nrows</code>, <code>ncols</code>, and <code>plot_number</code> are all less than 10, a convenience exists such that the a 3 digit number can be given instead, where the hundreds represent <code>nrows</code>, the tens represent <code>ncols</code> and the units represent <code>plot_number</code>. For instance,</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">subplot(<span class="number">211</span>) == subplot(<span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>) </span><br></pre></td></tr></table></figure><p>produces a subaxes in a figure which represents the top plot (i.e. the first) in a 2 rows by 1 column notional grid (no grid actually exists, but conceptually this is how the returned subplot has been positioned).</p><h2 id="Prepping-Data"><a href="#Prepping-Data" class="headerlink" title="Prepping Data"></a>Prepping Data</h2><p>Let’s download, import and clean our primary Canadian Immigration dataset using <em>pandas</em> <code>read_excel()</code> method for any visualization.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">df_can = pd.read_excel(<span class="string">&#x27;https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork/Data%20Files/Canada.xlsx&#x27;</span>,</span><br><span class="line">                       sheet_name=<span class="string">&#x27;Canada by Citizenship&#x27;</span>,</span><br><span class="line">                       skiprows=<span class="built_in">range</span>(<span class="number">20</span>),</span><br><span class="line">                       skipfooter=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">&#x27;Data downloaded and read into a dataframe!&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># clean up the dataset to remove unnecessary columns (eg. REG) </span></span><br><span class="line">df_can.drop([<span class="string">&#x27;AREA&#x27;</span>,<span class="string">&#x27;REG&#x27;</span>,<span class="string">&#x27;DEV&#x27;</span>,<span class="string">&#x27;Type&#x27;</span>,<span class="string">&#x27;Coverage&#x27;</span>], axis = <span class="number">1</span>, inplace = <span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># let&#x27;s rename the columns so that they make sense</span></span><br><span class="line">df_can.rename (columns = &#123;<span class="string">&#x27;OdName&#x27;</span>:<span class="string">&#x27;Country&#x27;</span>, <span class="string">&#x27;AreaName&#x27;</span>:<span class="string">&#x27;Continent&#x27;</span>,<span class="string">&#x27;RegName&#x27;</span>:<span class="string">&#x27;Region&#x27;</span>&#125;, inplace = <span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># for sake of consistency, let&#x27;s also make all column labels of type string</span></span><br><span class="line">df_can.columns = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">str</span>, df_can.columns))</span><br><span class="line"></span><br><span class="line"><span class="comment"># set the country name as index - useful for quickly looking up countries using .loc method</span></span><br><span class="line">df_can.set_index(<span class="string">&#x27;Country&#x27;</span>, inplace = <span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># add total column</span></span><br><span class="line">df_can[<span class="string">&#x27;Total&#x27;</span>] =  df_can.<span class="built_in">sum</span> (axis = <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># years that we will be using in this lesson - useful for plotting later on</span></span><br><span class="line">years = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">str</span>, <span class="built_in">range</span>(<span class="number">1980</span>, <span class="number">2014</span>)))</span><br><span class="line"><span class="comment"># print (&#x27;data dimensions:&#x27;, df_can.shape)</span></span><br></pre></td></tr></table></figure><h2 id="——————————————————————–"><a href="#——————————————————————–" class="headerlink" title="——————————————————————–"></a>——————————————————————–</h2><h2 id="Line-plots"><a href="#Line-plots" class="headerlink" title="Line plots"></a>Line plots</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">haiti = df_can.loc[<span class="string">&#x27;Haiti&#x27;</span>, years] <span class="comment"># passing in years 1980 - 2013 to exclude the &#x27;total&#x27; column</span></span><br><span class="line">haiti.head()</span><br><span class="line"><span class="comment"># haiti.plot()</span></span><br></pre></td></tr></table></figure><p><em>pandas</em> automatically populated the x-axis with the index values (years), and the y-axis with the column values (population). However, notice how the years were not displayed because they are of type <em>string</em>. Therefore, let’s change the type of the index values to <em>integer</em> for plotting.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">haiti.plot(kind=<span class="string">&#x27;line&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&#x27;Immigration from Haiti&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Number of immigrants&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Years&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># annotate the 2010 Earthquake. </span></span><br><span class="line"><span class="comment"># syntax: plt.text(x, y, label)</span></span><br><span class="line">plt.text(<span class="number">2000</span>, <span class="number">6000</span>, <span class="string">&#x27;2010 Earthquake&#x27;</span>) <span class="comment"># see note below</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># plt.show() # need this line to show the updates made to the figure</span></span><br></pre></td></tr></table></figure><p>Quick note on x and y values in <code>plt.text(x, y, label)</code>:</p><p>Since the x-axis (years) is type ‘integer’, we specified x as a year. The y axis (number of immigrants) is type ‘integer’, so we can just specify the value y = 6000.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.text(<span class="number">2000</span>, <span class="number">6000</span>, <span class="string">&#x27;2010 Earthquake&#x27;</span>) <span class="comment"># years stored as type int</span></span><br></pre></td></tr></table></figure><p>If the years were stored as type ‘string’, we would need to specify x as the index position of the year. Eg 20th index is year 2000 since it is the 20th year with a base year of 1980.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.text(<span class="number">20</span>, <span class="number">6000</span>, <span class="string">&#x27;2010 Earthquake&#x27;</span>) <span class="comment"># years stored as type int</span></span><br></pre></td></tr></table></figure><h2 id="Area-plots"><a href="#Area-plots" class="headerlink" title="Area plots"></a>Area plots</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># get the top 5 entries</span></span><br><span class="line">df_top5 = df_can.head()</span><br><span class="line"></span><br><span class="line"><span class="comment"># transpose the dataframe</span></span><br><span class="line">df_top5 = df_top5[years].transpose() </span><br><span class="line"></span><br><span class="line">df_top5.head()</span><br><span class="line"></span><br><span class="line">df_top5.index = df_top5.index.<span class="built_in">map</span>(<span class="built_in">int</span>) <span class="comment"># let&#x27;s change the index values of df_top5 to type integer for plotting</span></span><br><span class="line">df_top5.plot(kind=<span class="string">&#x27;area&#x27;</span>, </span><br><span class="line">             stacked=<span class="literal">False</span>,</span><br><span class="line">             figsize=(<span class="number">20</span>, <span class="number">10</span>), <span class="comment"># pass a tuple (x, y) size</span></span><br><span class="line">             )</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&#x27;Immigration Trend of Top 5 Countries&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Number of Immigrants&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Years&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># plt.show()</span></span><br></pre></td></tr></table></figure><p>The unstacked plot has a default transparency (alpha value) at 0.5. We can modify this value by passing in the <code>alpha</code> parameter.2​The unstacked plot has a default transparency (alpha value) at 0.5. We can modify this value by passing in the alpha parameter.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">df_top5.plot(kind=<span class="string">&#x27;area&#x27;</span>, </span><br><span class="line">             alpha=<span class="number">0.25</span>, <span class="comment"># 0-1, default value a= 0.5</span></span><br><span class="line">             stacked=<span class="literal">False</span>,</span><br><span class="line">             figsize=(<span class="number">20</span>, <span class="number">10</span>),</span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&#x27;Immigration Trend of Top 5 Countries&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Number of Immigrants&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Years&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># plt.show()</span></span><br></pre></td></tr></table></figure><h2 id="Histrograms"><a href="#Histrograms" class="headerlink" title="Histrograms"></a>Histrograms</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># np.histogram returns 2 values</span></span><br><span class="line">count, bin_edges = np.histogram(df_can[<span class="string">&#x27;2013&#x27;</span>])</span><br><span class="line"></span><br><span class="line">print(count) <span class="comment"># frequency count</span></span><br><span class="line">print(bin_edges) <span class="comment"># bin ranges, default = 10 bins</span></span><br></pre></td></tr></table></figure><pre><code>[178  11   1   2   0   0   0   0   1   2]
[    0.   3412.9  6825.8 10238.7 13651.6 17064.5 20477.4 23890.3 27303.2
 30716.1 34129. ]</code></pre><p>By default, the histrogram method breaks up the dataset into 10 bins.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">df_can[<span class="string">&#x27;2013&#x27;</span>].plot(kind=<span class="string">&#x27;hist&#x27;</span>, figsize=(<span class="number">8</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&#x27;Histogram of Immigration from 195 Countries in 2013&#x27;</span>) <span class="comment"># add a title to the histogram</span></span><br><span class="line">plt.ylabel(<span class="string">&#x27;Number of Countries&#x27;</span>) <span class="comment"># add y-label</span></span><br><span class="line">plt.xlabel(<span class="string">&#x27;Number of Immigrants&#x27;</span>) <span class="comment"># add x-label</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># plt.show()</span></span><br></pre></td></tr></table></figure><p>Notice that the x-axis labels do not match with the bin size. This can be fixed by passing in a xticks keyword that contains the list of the bin sizes, as follows:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x27;bin_edges&#x27; is a list of bin intervals</span></span><br><span class="line">count, bin_edges = np.histogram(df_can[<span class="string">&#x27;2013&#x27;</span>])</span><br><span class="line"></span><br><span class="line">df_can[<span class="string">&#x27;2013&#x27;</span>].plot(kind=<span class="string">&#x27;hist&#x27;</span>, figsize=(<span class="number">8</span>, <span class="number">5</span>), xticks=bin_edges)</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&#x27;Histogram of Immigration from 195 countries in 2013&#x27;</span>) <span class="comment"># add a title to the histogram</span></span><br><span class="line">plt.ylabel(<span class="string">&#x27;Number of Countries&#x27;</span>) <span class="comment"># add y-label</span></span><br><span class="line">plt.xlabel(<span class="string">&#x27;Number of Immigrants&#x27;</span>) <span class="comment"># add x-label</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># plt.show()</span></span><br></pre></td></tr></table></figure><p><em>Side Note:</em> We could use <code>df_can[&#39;2013&#39;].plot.hist()</code>, instead. In fact, throughout this lesson, using <code>some_data.plot(kind=&#39;type_plot&#39;, ...)</code> is equivalent to <code>some_data.plot.type_plot(...)</code>. That is, passing the type of the plot as argument or method behaves the same.</p><p>See the <em>pandas</em> documentation for more info <a target="_blank" rel="noopener" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.plot.html?cm_mmc=Email_Newsletter-_-Developer_Ed+Tech-_-WW_WW-_-SkillsNetwork-Courses-IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork-20297740&cm_mmca1=000026UJ&cm_mmca2=10006555&cm_mmca3=M12345678&cvosrc=email.Newsletter.M12345678&cvo_campaign=000026UJ&cm_mmc=Email_Newsletter-_-Developer_Ed+Tech-_-WW_WW-_-SkillsNetwork-Courses-IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork-20297740&cm_mmca1=000026UJ&cm_mmca2=10006555&cm_mmca3=M12345678&cvosrc=email.Newsletter.M12345678&cvo_campaign=000026UJ&cm_mmc=Email_Newsletter-_-Developer_Ed+Tech-_-WW_WW-_-SkillsNetwork-Courses-IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork-20297740&cm_mmca1=000026UJ&cm_mmca2=10006555&cm_mmca3=M12345678&cvosrc=email.Newsletter.M12345678&cvo_campaign=000026UJ&cm_mmc=Email_Newsletter-_-Developer_Ed+Tech-_-WW_WW-_-SkillsNetwork-Courses-IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork-20297740&cm_mmca1=000026UJ&cm_mmca2=10006555&cm_mmca3=M12345678&cvosrc=email.Newsletter.M12345678&cvo_campaign=000026UJ">http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.plot.html</a>.</p><p>We can also plot multiple histograms on the same plot.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># transpose dataframe</span></span><br><span class="line">df_t = df_can.loc[[<span class="string">&#x27;Denmark&#x27;</span>, <span class="string">&#x27;Norway&#x27;</span>, <span class="string">&#x27;Sweden&#x27;</span>], years].transpose()</span><br><span class="line"></span><br><span class="line"><span class="comment"># generate histogram</span></span><br><span class="line">df_t.plot(kind=<span class="string">&#x27;hist&#x27;</span>, figsize=(<span class="number">10</span>, <span class="number">6</span>))</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&#x27;Histogram of Immigration from Denmark, Norway, and Sweden from 1980 - 2013&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Number of Years&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Number of Immigrants&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># plt.show()</span></span><br></pre></td></tr></table></figure><p>Let’s make a few modifications to improve the impact and aesthetics of the previous plot:</p><ul><li>increase the bin size to 15 by passing in <code>bins</code> parameter</li><li>set transparency to 60% by passing in <code>alpha</code> paramemter</li><li>label the x-axis by passing in <code>x-label</code> paramater</li><li>change the colors of the plots by passing in <code>color</code> parameter</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># let&#x27;s get the x-tick values</span></span><br><span class="line">count, bin_edges = np.histogram(df_t, <span class="number">15</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># un-stacked histogram</span></span><br><span class="line">df_t.plot(kind =<span class="string">&#x27;hist&#x27;</span>, </span><br><span class="line">          figsize=(<span class="number">10</span>, <span class="number">6</span>),</span><br><span class="line">          bins=<span class="number">15</span>,</span><br><span class="line">          alpha=<span class="number">0.6</span>,</span><br><span class="line">          xticks=bin_edges,</span><br><span class="line">          color=[<span class="string">&#x27;coral&#x27;</span>, <span class="string">&#x27;darkslateblue&#x27;</span>, <span class="string">&#x27;mediumseagreen&#x27;</span>]</span><br><span class="line">         )</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&#x27;Histogram of Immigration from Denmark, Norway, and Sweden from 1980 - 2013&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Number of Years&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Number of Immigrants&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>If we do no want the plots to overlap each other, we can stack them using the <code>stacked</code> paramemter. Let’s also adjust the min and max x-axis labels to remove the extra gap on the edges of the plot. We can pass a tuple (min,max) using the <code>xlim</code> paramater, as show below.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">count, bin_edges = np.histogram(df_t, <span class="number">15</span>)</span><br><span class="line">xmin = bin_edges[<span class="number">0</span>] - <span class="number">10</span>   <span class="comment">#  first bin value is 31.0, adding buffer of 10 for aesthetic purposes </span></span><br><span class="line">xmax = bin_edges[<span class="number">-1</span>] + <span class="number">10</span>  <span class="comment">#  last bin value is 308.0, adding buffer of 10 for aesthetic purposes</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># stacked Histogram</span></span><br><span class="line">df_t.plot(kind=<span class="string">&#x27;hist&#x27;</span>,</span><br><span class="line">          figsize=(<span class="number">10</span>, <span class="number">6</span>), </span><br><span class="line">          bins=<span class="number">15</span>,</span><br><span class="line">          xticks=bin_edges,</span><br><span class="line">          color=[<span class="string">&#x27;coral&#x27;</span>, <span class="string">&#x27;darkslateblue&#x27;</span>, <span class="string">&#x27;mediumseagreen&#x27;</span>],</span><br><span class="line">          stacked=<span class="literal">True</span>,</span><br><span class="line">          xlim=(xmin, xmax)</span><br><span class="line">         )</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&#x27;Histogram of Immigration from Denmark, Norway, and Sweden from 1980 - 2013&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Number of Years&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Number of Immigrants&#x27;</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment"># plt.show()</span></span><br></pre></td></tr></table></figure><h2 id="Bar-charts"><a href="#Bar-charts" class="headerlink" title="Bar charts"></a>Bar charts</h2><p>To create a bar plot, we can pass one of two arguments via <code>kind</code> parameter in <code>plot()</code>:</p><ul><li><code>kind=bar</code> creates a <em>vertical</em> bar plot</li><li><code>kind=barh</code> creates a <em>horizontal</em> bar plot</li></ul><p><strong>Vertical bar plot</strong></p><p>In vertical bar graphs, the x-axis is used for labelling, and the length of bars on the y-axis corresponds to the magnitude of the variable being measured. Vertical bar graphs are particuarly useful in analyzing time series data. One disadvantage is that they lack space for text labelling at the foot of each bar.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># step 1: get the data</span></span><br><span class="line">df_iceland = df_can.loc[<span class="string">&#x27;Iceland&#x27;</span>, years]</span><br><span class="line">df_iceland.head()</span><br><span class="line"></span><br><span class="line"><span class="comment"># step 2: plot data</span></span><br><span class="line">df_iceland.plot(kind=<span class="string">&#x27;bar&#x27;</span>, figsize=(<span class="number">10</span>, <span class="number">6</span>))</span><br><span class="line"></span><br><span class="line">plt.xlabel(<span class="string">&#x27;Year&#x27;</span>) <span class="comment"># add to x-label to the plot</span></span><br><span class="line">plt.ylabel(<span class="string">&#x27;Number of immigrants&#x27;</span>) <span class="comment"># add y-label to the plot</span></span><br><span class="line">plt.title(<span class="string">&#x27;Icelandic immigrants to Canada from 1980 to 2013&#x27;</span>) <span class="comment"># add title to the plot</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># plt.show()</span></span><br></pre></td></tr></table></figure><p><strong>Horizontal Bar Plot</strong></p><p>Sometimes it is more practical to represent the data horizontally, especially if you need more room for labelling the bars. In horizontal bar graphs, the y-axis is used for labelling, and the length of bars on the x-axis corresponds to the magnitude of the variable being measured. As you will see, there is more room on the y-axis to label categetorical variables.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># generate plot</span></span><br><span class="line">df_top15.plot(kind=<span class="string">&#x27;barh&#x27;</span>, figsize=(<span class="number">12</span>, <span class="number">12</span>), color=<span class="string">&#x27;steelblue&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Number of Immigrants&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Top 15 Conuntries Contributing to the Immigration to Canada between 1980 - 2013&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># annotate value labels to each country</span></span><br><span class="line"><span class="keyword">for</span> index, value <span class="keyword">in</span> <span class="built_in">enumerate</span>(df_top15): </span><br><span class="line">    label = <span class="built_in">format</span>(<span class="built_in">int</span>(value), <span class="string">&#x27;,&#x27;</span>) <span class="comment"># format int with commas</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># place text at the end of bar (subtracting 47000 from x, and 0.1 from y to make it fit within the bar)</span></span><br><span class="line">plt.annotate(label, xy=(value - <span class="number">47000</span>, index - <span class="number">0.10</span>), color=<span class="string">&#x27;white&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="Annotate"><a href="#Annotate" class="headerlink" title="Annotate"></a>Annotate</h2><p>Let’s annotate this on the plot using the <code>annotate</code> method of the <strong>scripting layer</strong> or the <strong>pyplot interface</strong>. We will pass in the following parameters:</p><ul><li><code>s</code>: str, the text of annotation.</li><li><code>xy</code>: Tuple specifying the (x,y) point to annotate (in this case, end point of arrow).</li><li><code>xytext</code>: Tuple specifying the (x,y) point to place the text (in this case, start point of arrow).</li><li><code>xycoords</code>: The coordinate system that xy is given in - ‘data’ uses the coordinate system of the object being annotated (default).</li><li><code>arrowprops</code>: Takes a dictionary of properties to draw the arrow:<ul><li><code>arrowstyle</code>: Specifies the arrow style, <code>&#39;-&gt;&#39;</code> is standard arrow.</li><li><code>connectionstyle</code>: Specifies the connection type. <code>arc3</code> is a straight line.</li><li><code>color</code>: Specifes color of arror.</li><li><code>lw</code>: Specifies the line width.</li></ul></li></ul><p>I encourage you to read the Matplotlib documentation for more details on annotations:<br><a target="_blank" rel="noopener" href="http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.annotate?cm_mmc=Email_Newsletter-_-Developer_Ed%2BTech-_-WW_WW-_-SkillsNetwork-Courses-IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork-20297740&cm_mmca1=000026UJ&cm_mmca2=10006555&cm_mmca3=M12345678&cvosrc=email.Newsletter.M12345678&cvo_campaign=000026UJ&cm_mmc=Email_Newsletter-_-Developer_Ed%2BTech-_-WW_WW-_-SkillsNetwork-Courses-IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork-20297740&cm_mmca1=000026UJ&cm_mmca2=10006555&cm_mmca3=M12345678&cvosrc=email.Newsletter.M12345678&cvo_campaign=000026UJ">http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.annotate</a>.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">df_iceland.plot(kind=<span class="string">&#x27;bar&#x27;</span>, figsize=(<span class="number">10</span>, <span class="number">6</span>), rot=<span class="number">90</span>) <span class="comment"># rotate the xticks(labelled points on x-axis) by 90 degrees</span></span><br><span class="line"></span><br><span class="line">plt.xlabel(<span class="string">&#x27;Year&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Number of Immigrants&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Icelandic Immigrants to Canada from 1980 to 2013&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Annotate arrow</span></span><br><span class="line">plt.annotate(<span class="string">&#x27;&#x27;</span>,                      <span class="comment"># s: str. Will leave it blank for no text</span></span><br><span class="line">             xy=(<span class="number">32</span>, <span class="number">70</span>),             <span class="comment"># place head of the arrow at point (year 2012 , pop 70)</span></span><br><span class="line">             xytext=(<span class="number">28</span>, <span class="number">20</span>),         <span class="comment"># place base of the arrow at point (year 2008 , pop 20)</span></span><br><span class="line">             xycoords=<span class="string">&#x27;data&#x27;</span>,         <span class="comment"># will use the coordinate system of the object being annotated </span></span><br><span class="line">             arrowprops=<span class="built_in">dict</span>(arrowstyle=<span class="string">&#x27;-&gt;&#x27;</span>, connectionstyle=<span class="string">&#x27;arc3&#x27;</span>, color=<span class="string">&#x27;blue&#x27;</span>, lw=<span class="number">2</span>)</span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line"><span class="comment"># plt.show()</span></span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20201229124555341.png#pic_center">Let’s also annotate a text to go over the arrow. We will pass in the following additional parameters:</p><ul><li><code>rotation</code>: rotation angle of text in degrees (counter clockwise)</li><li><code>va</code>: vertical alignment of text [‘center’ | ‘top’ | ‘bottom’ | ‘baseline’]</li><li><code>ha</code>: horizontal alignment of text [‘center’ | ‘right’ | ‘left’]</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">df_iceland.plot(kind=<span class="string">&#x27;bar&#x27;</span>, figsize=(<span class="number">10</span>, <span class="number">6</span>), rot=<span class="number">90</span>) </span><br><span class="line"></span><br><span class="line">plt.xlabel(<span class="string">&#x27;Year&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Number of Immigrants&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Icelandic Immigrants to Canada from 1980 to 2013&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Annotate arrow</span></span><br><span class="line">plt.annotate(<span class="string">&#x27;&#x27;</span>,                      <span class="comment"># s: str. will leave it blank for no text</span></span><br><span class="line">             xy=(<span class="number">32</span>, <span class="number">70</span>),             <span class="comment"># place head of the arrow at point (year 2012 , pop 70)</span></span><br><span class="line">             xytext=(<span class="number">28</span>, <span class="number">20</span>),         <span class="comment"># place base of the arrow at point (year 2008 , pop 20)</span></span><br><span class="line">             xycoords=<span class="string">&#x27;data&#x27;</span>,         <span class="comment"># will use the coordinate system of the object being annotated </span></span><br><span class="line">             arrowprops=<span class="built_in">dict</span>(arrowstyle=<span class="string">&#x27;-&gt;&#x27;</span>, connectionstyle=<span class="string">&#x27;arc3&#x27;</span>, color=<span class="string">&#x27;blue&#x27;</span>, lw=<span class="number">2</span>)</span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line"><span class="comment"># Annotate Text</span></span><br><span class="line">plt.annotate(<span class="string">&#x27;2008 - 2011 Financial Crisis&#x27;</span>, <span class="comment"># text to display</span></span><br><span class="line">             xy=(<span class="number">28</span>, <span class="number">30</span>),                    <span class="comment"># start the text at at point (year 2008 , pop 30)</span></span><br><span class="line">             rotation=<span class="number">72.5</span>,                  <span class="comment"># based on trial and error to match the arrow</span></span><br><span class="line">             va=<span class="string">&#x27;bottom&#x27;</span>,                    <span class="comment"># want the text to be vertically &#x27;bottom&#x27; aligned</span></span><br><span class="line">             ha=<span class="string">&#x27;left&#x27;</span>,                      <span class="comment"># want the text to be horizontally &#x27;left&#x27; algned.</span></span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line"><span class="comment"># plt.show()</span></span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20201229124651288.png#pic_center"></p><h2 id="Pie-charts"><a href="#Pie-charts" class="headerlink" title="Pie charts"></a>Pie charts</h2><p>You are most likely already familiar with pie charts as it is widely used in business and media. We can create pie charts in Matplotlib by passing in the <code>kind=pie</code> keyword.</p><p>We will pass in <code>kind = &#39;pie&#39;</code> keyword, along with the following additional parameters:</p><ul><li><code>autopct</code> - is a string or function used to label the wedges with their numeric value. The label will be placed inside the wedge. If it is a format string, the label will be <code>fmt%pct</code>.</li><li><code>startangle</code> - rotates the start of the pie chart by angle degrees counterclockwise from the x-axis.</li><li><code>shadow</code> - Draws a shadow beneath the pie (to give a 3D feel).</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># group countries by continents and apply sum() function </span></span><br><span class="line">df_continents = df_can.groupby(<span class="string">&#x27;Continent&#x27;</span>, axis=<span class="number">0</span>).<span class="built_in">sum</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># note: the output of the groupby method is a `groupby&#x27; object. </span></span><br><span class="line"><span class="comment"># we can not use it further until we apply a function (eg .sum())</span></span><br><span class="line">print(<span class="built_in">type</span>(df_can.groupby(<span class="string">&#x27;Continent&#x27;</span>, axis=<span class="number">0</span>)))</span><br><span class="line"></span><br><span class="line"><span class="comment"># autopct create %, start angle represent starting point</span></span><br><span class="line">df_continents[<span class="string">&#x27;Total&#x27;</span>].plot(kind=<span class="string">&#x27;pie&#x27;</span>,</span><br><span class="line">                            figsize=(<span class="number">5</span>, <span class="number">6</span>),</span><br><span class="line">                            autopct=<span class="string">&#x27;%1.1f%%&#x27;</span>, <span class="comment"># add in percentages</span></span><br><span class="line">                            startangle=<span class="number">90</span>,     <span class="comment"># start angle 90° (Africa)</span></span><br><span class="line">                            shadow=<span class="literal">True</span>,       <span class="comment"># add shadow      </span></span><br><span class="line">                            )</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&#x27;Immigration to Canada by Continent [1980 - 2013]&#x27;</span>)</span><br><span class="line">plt.axis(<span class="string">&#x27;equal&#x27;</span>) <span class="comment"># Sets the pie chart to look like a circle.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># plt.show()</span></span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20201229125253445.png#pic_center"><br>The above visual is not very clear, the numbers and text overlap in some instances. Let’s make a few modifications to improve the visuals:</p><ul><li>Remove the text labels on the pie chart by passing in <code>legend</code> and add it as a seperate legend using <code>plt.legend()</code>.</li><li>Push out the percentages to sit just outside the pie chart by passing in <code>pctdistance</code> parameter.</li><li>Pass in a custom set of colors for continents by passing in <code>colors</code> parameter.</li><li><strong>Explode</strong> the pie chart to emphasize the lowest three continents (Africa, North America, and Latin America and Carribbean) by pasing in <code>explode</code> parameter.</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">colors_list = [<span class="string">&#x27;gold&#x27;</span>, <span class="string">&#x27;yellowgreen&#x27;</span>, <span class="string">&#x27;lightcoral&#x27;</span>, <span class="string">&#x27;lightskyblue&#x27;</span>, <span class="string">&#x27;lightgreen&#x27;</span>, <span class="string">&#x27;pink&#x27;</span>]</span><br><span class="line">explode_list = [<span class="number">0.1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>, <span class="number">0.1</span>] <span class="comment"># ratio for each continent with which to offset each wedge.</span></span><br><span class="line"></span><br><span class="line">df_continents[<span class="string">&#x27;Total&#x27;</span>].plot(kind=<span class="string">&#x27;pie&#x27;</span>,</span><br><span class="line">                            figsize=(<span class="number">15</span>, <span class="number">6</span>),</span><br><span class="line">                            autopct=<span class="string">&#x27;%1.1f%%&#x27;</span>, </span><br><span class="line">                            startangle=<span class="number">90</span>,    </span><br><span class="line">                            shadow=<span class="literal">True</span>,       </span><br><span class="line">                            labels=<span class="literal">None</span>,         <span class="comment"># turn off labels on pie chart</span></span><br><span class="line">                            pctdistance=<span class="number">1.12</span>,    <span class="comment"># the ratio between the center of each pie slice and the start of the text generated by autopct </span></span><br><span class="line">                            colors=colors_list,  <span class="comment"># add custom colors</span></span><br><span class="line">                            explode=explode_list <span class="comment"># &#x27;explode&#x27; lowest 3 continents</span></span><br><span class="line">                            )</span><br><span class="line"></span><br><span class="line"><span class="comment"># scale the title up by 12% to match pctdistance</span></span><br><span class="line">plt.title(<span class="string">&#x27;Immigration to Canada by Continent [1980 - 2013]&#x27;</span>, y=<span class="number">1.12</span>) </span><br><span class="line"></span><br><span class="line">plt.axis(<span class="string">&#x27;equal&#x27;</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment"># add legend</span></span><br><span class="line">plt.legend(labels=df_continents.index, loc=<span class="string">&#x27;upper left&#x27;</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment"># plt.show()</span></span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20201229125324619.png#pic_center"></p><h2 id="Box-plots"><a href="#Box-plots" class="headerlink" title="Box plots"></a>Box plots</h2><p>A <code>box plot</code> is a way of statistically representing the <em>distribution</em> of the data through five main dimensions:</p><ul><li><strong>Minimun:</strong> Smallest number in the dataset.</li><li><strong>First quartile:</strong> Middle number between the <code>minimum</code> and the <code>median</code>.</li><li><strong>Second quartile (Median):</strong> Middle number of the (sorted) dataset.</li><li><strong>Third quartile:</strong> Middle number between <code>median</code> and <code>maximum</code>.</li><li><strong>Maximum:</strong> Highest number in the dataset.<img src="https://s3-api.us-geo.objectstorage.softlayer.net/cf-courses-data/CognitiveClass/DV0101EN/labs/Images/boxplot_complete.png" width="440," align="center"></li></ul><p>To make a <code>box plot</code>, we can use <code>kind=box</code> in <code>plot</code> method invoked on a <em>pandas</em> series or dataframe.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># to get a dataframe, place extra square brackets around &#x27;Japan&#x27;.</span></span><br><span class="line">df_japan = df_can.loc[[<span class="string">&#x27;Japan&#x27;</span>], years].transpose()</span><br><span class="line">df_japan.head()</span><br><span class="line"></span><br><span class="line">df_japan.plot(kind=<span class="string">&#x27;box&#x27;</span>, figsize=(<span class="number">8</span>, <span class="number">6</span>))</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&#x27;Box plot of Japanese Immigrants from 1980 - 2013&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Number of Immigrants&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>P.S. We can view the actual numbers by calling the <code>describe()</code> method on the dataframe.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_japan.describe()</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20201229125727635.png#pic_center"><br>If you prefer to create horizontal box plots, you can pass the <code>vert</code> parameter in the <strong>plot</strong> function and assign it to <em>False</em>. You can also specify a different color in case you are not a big fan of the default red color.</p><p><strong>horizontal box plots</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">df_CI= df_can.loc[[<span class="string">&#x27;China&#x27;</span>, <span class="string">&#x27;India&#x27;</span>], years].transpose()</span><br><span class="line">df_CI.head()</span><br><span class="line"></span><br><span class="line"><span class="comment"># horizontal box plots</span></span><br><span class="line">df_CI.plot(kind=<span class="string">&#x27;box&#x27;</span>, figsize=(<span class="number">10</span>, <span class="number">7</span>), color=<span class="string">&#x27;blue&#x27;</span>, vert=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&#x27;Box plots of Immigrants from China and India (1980 - 2013)&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Number of Immigrants&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/2020122912591079.png#pic_center"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">df_top15 = df_can.sort_values([<span class="string">&#x27;Total&#x27;</span>], ascending=<span class="literal">False</span>, axis=<span class="number">0</span>).head(<span class="number">15</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># create a list of all years in decades 80&#x27;s, 90&#x27;s, and 00&#x27;s</span></span><br><span class="line">years_80s = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">str</span>, <span class="built_in">range</span>(<span class="number">1980</span>, <span class="number">1990</span>))) </span><br><span class="line">years_90s = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">str</span>, <span class="built_in">range</span>(<span class="number">1990</span>, <span class="number">2000</span>))) </span><br><span class="line">years_00s = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">str</span>, <span class="built_in">range</span>(<span class="number">2000</span>, <span class="number">2010</span>))) </span><br><span class="line"></span><br><span class="line"><span class="comment"># slice the original dataframe df_can to create a series for each decade</span></span><br><span class="line">df_80s = df_top15.loc[:, years_80s].<span class="built_in">sum</span>(axis=<span class="number">1</span>) </span><br><span class="line">df_90s = df_top15.loc[:, years_90s].<span class="built_in">sum</span>(axis=<span class="number">1</span>) </span><br><span class="line">df_00s = df_top15.loc[:, years_00s].<span class="built_in">sum</span>(axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># merge the three series into a new data frame</span></span><br><span class="line">new_df = pd.DataFrame(&#123;<span class="string">&#x27;1980s&#x27;</span>: df_80s, <span class="string">&#x27;1990s&#x27;</span>: df_90s, <span class="string">&#x27;2000s&#x27;</span>:df_00s&#125;) </span><br><span class="line"></span><br><span class="line"><span class="comment"># display dataframe</span></span><br><span class="line">new_df.head()</span><br><span class="line"></span><br><span class="line">new_df.describe()</span><br><span class="line"></span><br><span class="line">new_df.plot(kind=<span class="string">&#x27;box&#x27;</span>, figsize=(<span class="number">10</span>, <span class="number">6</span>))</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&#x27;Immigration from top 15 countries for decades 80s, 90s and 2000s&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># plt.show()</span></span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20201229130512425.png#pic_center"></p><p>The box plot is an advanced visualizaiton tool, and there are many options and customizations that exceed the scope of this lab. Please refer to <a target="_blank" rel="noopener" href="http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.boxplot?cm_mmc=Email_Newsletter-_-Developer_Ed%2BTech-_-WW_WW-_-SkillsNetwork-Courses-IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork-20297740&cm_mmca1=000026UJ&cm_mmca2=10006555&cm_mmca3=M12345678&cvosrc=email.Newsletter.M12345678&cvo_campaign=000026UJ&cm_mmc=Email_Newsletter-_-Developer_Ed%2BTech-_-WW_WW-_-SkillsNetwork-Courses-IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork-20297740&cm_mmca1=000026UJ&cm_mmca2=10006555&cm_mmca3=M12345678&cvosrc=email.Newsletter.M12345678&cvo_campaign=000026UJ">Matplotlib documentation</a> on box plots for more information.</p><h2 id="Scatter-plots"><a href="#Scatter-plots" class="headerlink" title="Scatter plots"></a>Scatter plots</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># we can use the sum() method to get the total population per year</span></span><br><span class="line">df_tot = pd.DataFrame(df_can[years].<span class="built_in">sum</span>(axis=<span class="number">0</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># change the years to type int (useful for regression later on)</span></span><br><span class="line">df_tot.index = <span class="built_in">map</span>(<span class="built_in">int</span>, df_tot.index)</span><br><span class="line"></span><br><span class="line"><span class="comment"># reset the index to put in back in as a column in the df_tot dataframe</span></span><br><span class="line">df_tot.reset_index(inplace = <span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># rename columns</span></span><br><span class="line">df_tot.columns = [<span class="string">&#x27;year&#x27;</span>, <span class="string">&#x27;total&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># view the final dataframe</span></span><br><span class="line">df_tot.head()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>We can create a <code>scatter</code> plot set by passing in <code>kind=&#39;scatter&#39;</code> as plot argument. We will also need to pass in <code>x</code> and <code>y</code> keywords to specify the columns that go on the x- and the y-axis.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">df_tot.plot(kind=<span class="string">&#x27;scatter&#x27;</span>, x=<span class="string">&#x27;year&#x27;</span>, y=<span class="string">&#x27;total&#x27;</span>, figsize=(<span class="number">10</span>, <span class="number">6</span>), color=<span class="string">&#x27;darkblue&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&#x27;Total Immigration to Canada from 1980 - 2013&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Year&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Number of Immigrants&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="Bubble-plots"><a href="#Bubble-plots" class="headerlink" title="Bubble plots"></a>Bubble plots</h2><p>A <code>bubble plot</code> is a variation of the <code>scatter plot</code> that displays three dimensions of data (x, y, z). The datapoints are replaced with bubbles, and the size of the bubble is determined by the third variable ‘z’, also known as the weight. In <code>maplotlib</code>, we can pass in an array or scalar to the keyword <code>s</code> to <code>plot()</code>, that contains the weight of each point.</p><p><strong>Let’s start by analyzing the effect of Argentina’s great depression</strong>.</p><p>Argentina suffered a great depression from 1998 - 2002, which caused widespread unemployment, riots, the fall of the government, and a default on the country’s foreign debt. In terms of income, over 50% of Argentines were poor, and seven out of ten Argentine children were poor at the depth of the crisis in 2002.</p><p>Let’s analyze the effect of this crisis, and compare Argentina’s immigration to that of it’s neighbour Brazil. Let’s do that using a <code>bubble plot</code> of immigration from Brazil and Argentina for the years 1980 - 2013. We will set the weights for the bubble as the <em>normalized</em> value of the population for each year.</p><p>Step 1: Get the data for Brazil and Argentina. Like in the previous example, we will convert the <code>Years</code> to type int and bring it in the dataframe.2​Step 1: Get the data for Brazil and Argentina. Like in the previous example, we will convert the Years to type int and bring it in the dataframe.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">df_can_t = df_can[years].transpose() # transposed dataframe</span><br><span class="line"></span><br><span class="line"># cast the Years (the index) to type int</span><br><span class="line">df_can_t.index = map(int, df_can_t.index)</span><br><span class="line"></span><br><span class="line"># let&#x27;s label the index. This will automatically be the column name when we reset the index</span><br><span class="line">df_can_t.index.name = &#x27;Year&#x27;</span><br><span class="line"></span><br><span class="line"># reset index to bring the Year in as a column</span><br><span class="line">df_can_t.reset_index(inplace=True)</span><br><span class="line"></span><br><span class="line"># view the changes</span><br><span class="line">df_can_t.head()</span><br></pre></td></tr></table></figure><p>Step 2: Create the normalized weights.</p><p>There are several methods of normalizations in statistics, each with its own use. In this case, we will use <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Feature_scaling?cm_mmc=Email_Newsletter-_-Developer_Ed+Tech-_-WW_WW-_-SkillsNetwork-Courses-IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork-20297740&cm_mmca1=000026UJ&cm_mmca2=10006555&cm_mmca3=M12345678&cvosrc=email.Newsletter.M12345678&cvo_campaign=000026UJ&cm_mmc=Email_Newsletter-_-Developer_Ed+Tech-_-WW_WW-_-SkillsNetwork-Courses-IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork-20297740&cm_mmca1=000026UJ&cm_mmca2=10006555&cm_mmca3=M12345678&cvosrc=email.Newsletter.M12345678&cvo_campaign=000026UJ">feature scaling</a> to bring all values into the range [0,1]. The general formula is:</p><img src="https://s3-api.us-geo.objectstorage.softlayer.net/cf-courses-data/CognitiveClass/DV0101EN/labs/Images/Mod3Fig3FeatureScaling.png" align="center"><p>where <em><code>X</code></em> is an original value, <em><code>X&#39;</code></em> is the normalized value. The formula sets the max value in the dataset to 1, and sets the min value to 0. The rest of the datapoints are scaled to a value between 0-1 accordingly.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># normalize Brazil data</span><br><span class="line">norm_brazil = (df_can_t[&#x27;Brazil&#x27;] - df_can_t[&#x27;Brazil&#x27;].min()) / (df_can_t[&#x27;Brazil&#x27;].max() - df_can_t[&#x27;Brazil&#x27;].min())</span><br><span class="line"></span><br><span class="line"># normalize Argentina data</span><br><span class="line">norm_argentina = (df_can_t[&#x27;Argentina&#x27;] - df_can_t[&#x27;Argentina&#x27;].min()) / (df_can_t[&#x27;Argentina&#x27;].max() - df_can_t[&#x27;Argentina&#x27;].min())</span><br></pre></td></tr></table></figure><p>Step 3: Plot the data.</p><ul><li>To plot two different scatter plots in one plot, we can include the axes one plot into the other by passing it via the <code>ax</code> parameter.</li><li>We will also pass in the weights using the <code>s</code> parameter. Given that the normalized weights are between 0-1, they won’t be visible on the plot. Therefore we will:<ul><li>multiply weights by 2000 to scale it up on the graph, and,</li><li>add 10 to compensate for the min value (which has a 0 weight and therefore scale with x2000).</li></ul></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># Brazil</span><br><span class="line">ax0 = df_can_t.plot(kind=&#x27;scatter&#x27;,</span><br><span class="line">                    x=&#x27;Year&#x27;,</span><br><span class="line">                    y=&#x27;Brazil&#x27;,</span><br><span class="line">                    figsize=(14, 8),</span><br><span class="line">                    alpha=0.5,                  # transparency</span><br><span class="line">                    color=&#x27;green&#x27;,</span><br><span class="line">                    s=norm_brazil * 2000 + 10,  # pass in weights </span><br><span class="line">                    xlim=(1975, 2015)</span><br><span class="line">                   )</span><br><span class="line"></span><br><span class="line"># Argentina</span><br><span class="line">ax1 = df_can_t.plot(kind=&#x27;scatter&#x27;,</span><br><span class="line">                    x=&#x27;Year&#x27;,</span><br><span class="line">                    y=&#x27;Argentina&#x27;,</span><br><span class="line">                    alpha=0.5,</span><br><span class="line">                    color=&quot;blue&quot;,</span><br><span class="line">                    s=norm_argentina * 2000 + 10,</span><br><span class="line">                    ax = ax0</span><br><span class="line">                   )</span><br><span class="line"></span><br><span class="line">ax0.set_ylabel(&#x27;Number of Immigrants&#x27;)</span><br><span class="line">ax0.set_title(&#x27;Immigration from Brazil and Argentina from 1980 - 2013&#x27;)</span><br><span class="line">ax0.legend([&#x27;Brazil&#x27;, &#x27;Argentina&#x27;], loc=&#x27;upper left&#x27;, fontsize=&#x27;x-large&#x27;)</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20201229131825222.png#pic_center"></p><h2 id="Seaborn-Regression-plots"><a href="#Seaborn-Regression-plots" class="headerlink" title="Seaborn - Regression plots"></a>Seaborn - Regression plots</h2><blockquote><p>Seaborn is a Python visualization library based on matplotlib. It provides a high-level interface for drawing attractive statistical graphics. You can learn more about <em>seaborn</em> by following this <a target="_blank" rel="noopener" href="https://seaborn.pydata.org/?cm_mmc=Email_Newsletter-_-Developer_Ed+Tech-_-WW_WW-_-SkillsNetwork-Courses-IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork-20297740&cm_mmca1=000026UJ&cm_mmca2=10006555&cm_mmca3=M12345678&cvosrc=email.Newsletter.M12345678&cvo_campaign=000026UJ&cm_mmc=Email_Newsletter-_-Developer_Ed+Tech-_-WW_WW-_-SkillsNetwork-Courses-IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork-20297740&cm_mmca1=000026UJ&cm_mmca2=10006555&cm_mmca3=M12345678&cvosrc=email.Newsletter.M12345678&cvo_campaign=000026UJ&cm_mmc=Email_Newsletter-_-Developer_Ed+Tech-_-WW_WW-_-SkillsNetwork-Courses-IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork-20297740&cm_mmca1=000026UJ&cm_mmca2=10006555&cm_mmca3=M12345678&cvosrc=email.Newsletter.M12345678&cvo_campaign=000026UJ&cm_mmc=Email_Newsletter-_-Developer_Ed+Tech-_-WW_WW-_-SkillsNetwork-Courses-IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork-20297740&cm_mmca1=000026UJ&cm_mmca2=10006555&cm_mmca3=M12345678&cvosrc=email.Newsletter.M12345678&cvo_campaign=000026UJ">link</a> and more about <em>seaborn</em> regression plots by following this <a target="_blank" rel="noopener" href="http://seaborn.pydata.org/generated/seaborn.regplot.html?cm_mmc=Email_Newsletter-_-Developer_Ed+Tech-_-WW_WW-_-SkillsNetwork-Courses-IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork-20297740&cm_mmca1=000026UJ&cm_mmca2=10006555&cm_mmca3=M12345678&cvosrc=email.Newsletter.M12345678&cvo_campaign=000026UJ&cm_mmc=Email_Newsletter-_-Developer_Ed+Tech-_-WW_WW-_-SkillsNetwork-Courses-IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork-20297740&cm_mmca1=000026UJ&cm_mmca2=10006555&cm_mmca3=M12345678&cvosrc=email.Newsletter.M12345678&cvo_campaign=000026UJ&cm_mmc=Email_Newsletter-_-Developer_Ed+Tech-_-WW_WW-_-SkillsNetwork-Courses-IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork-20297740&cm_mmca1=000026UJ&cm_mmca2=10006555&cm_mmca3=M12345678&cvosrc=email.Newsletter.M12345678&cvo_campaign=000026UJ&cm_mmc=Email_Newsletter-_-Developer_Ed+Tech-_-WW_WW-_-SkillsNetwork-Courses-IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork-20297740&cm_mmca1=000026UJ&cm_mmca2=10006555&cm_mmca3=M12345678&cvosrc=email.Newsletter.M12345678&cvo_campaign=000026UJ">link</a>.</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># import library</span></span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"></span><br><span class="line"><span class="comment"># we can use the sum() method to get the total population per year</span></span><br><span class="line">df_tot = pd.DataFrame(df_can[years].<span class="built_in">sum</span>(axis=<span class="number">0</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># change the years to type float (useful for regression later on)</span></span><br><span class="line">df_tot.index = <span class="built_in">map</span>(<span class="built_in">float</span>, df_tot.index)</span><br><span class="line"></span><br><span class="line"><span class="comment"># reset the index to put in back in as a column in the df_tot dataframe</span></span><br><span class="line">df_tot.reset_index(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># rename columns</span></span><br><span class="line">df_tot.columns = [<span class="string">&#x27;year&#x27;</span>, <span class="string">&#x27;total&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># view the final dataframe</span></span><br><span class="line">df_tot.head()</span><br></pre></td></tr></table></figure><p>With <em>seaborn</em>, generating a regression plot is as simple as calling the <strong>regplot</strong> function.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line">ax = sns.regplot(x=<span class="string">&#x27;year&#x27;</span>, y=<span class="string">&#x27;total&#x27;</span>, data=df_tot)</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20201229173857413.png#pic_center"><br>Try to pretty it</p><ul><li>blow up the plot a little bit so that it is more appealing to the sight.</li><li>increase the size of markers so they match the new size of the figure, and add a title and x- and y-labels.</li><li>increase the font size of the tickmark labels, the title, and the x- and y-labels so they don’t feel left out!<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">plt.figure(figsize=(<span class="number">15</span>, <span class="number">10</span>))</span><br><span class="line"></span><br><span class="line">sns.<span class="built_in">set</span>(font_scale=<span class="number">1.5</span>)</span><br><span class="line"></span><br><span class="line">ax = sns.regplot(x=<span class="string">&#x27;year&#x27;</span>, y=<span class="string">&#x27;total&#x27;</span>, data=df_tot, color=<span class="string">&#x27;green&#x27;</span>, marker=<span class="string">&#x27;+&#x27;</span>, scatter_kws=&#123;<span class="string">&#x27;s&#x27;</span>: <span class="number">200</span>&#125;)</span><br><span class="line">ax.<span class="built_in">set</span>(xlabel=<span class="string">&#x27;Year&#x27;</span>, ylabel=<span class="string">&#x27;Total Immigration&#x27;</span>)</span><br><span class="line">ax.set_title(<span class="string">&#x27;Total Immigration to Canada from 1980 - 2013&#x27;</span>)</span><br></pre></td></tr></table></figure><img src="https://img-blog.csdnimg.cn/20201229174239269.png#pic_center"><br>If you are not a big fan of the purple background, you can easily change the style to a white plain background.</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">plt.figure(figsize=(<span class="number">15</span>, <span class="number">10</span>))</span><br><span class="line"></span><br><span class="line">sns.<span class="built_in">set</span>(font_scale=<span class="number">1.5</span>)</span><br><span class="line">sns.set_style(<span class="string">&#x27;ticks&#x27;</span>) <span class="comment"># change background to white background</span></span><br><span class="line"></span><br><span class="line">ax = sns.regplot(x=<span class="string">&#x27;year&#x27;</span>, y=<span class="string">&#x27;total&#x27;</span>, data=df_tot, color=<span class="string">&#x27;green&#x27;</span>, marker=<span class="string">&#x27;+&#x27;</span>, scatter_kws=&#123;<span class="string">&#x27;s&#x27;</span>: <span class="number">200</span>&#125;)</span><br><span class="line">ax.<span class="built_in">set</span>(xlabel=<span class="string">&#x27;Year&#x27;</span>, ylabel=<span class="string">&#x27;Total Immigration&#x27;</span>)</span><br><span class="line">ax.set_title(<span class="string">&#x27;Total Immigration to Canada from 1980 - 2013&#x27;</span>)</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20201229174303150.png#pic_center"><br>Or to a white background with gridlines.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">plt.figure(figsize=(<span class="number">15</span>, <span class="number">10</span>))</span><br><span class="line"></span><br><span class="line">sns.<span class="built_in">set</span>(font_scale=<span class="number">1.5</span>)</span><br><span class="line">sns.set_style(<span class="string">&#x27;whitegrid&#x27;</span>)</span><br><span class="line"></span><br><span class="line">ax = sns.regplot(x=<span class="string">&#x27;year&#x27;</span>, y=<span class="string">&#x27;total&#x27;</span>, data=df_tot, color=<span class="string">&#x27;green&#x27;</span>, marker=<span class="string">&#x27;+&#x27;</span>, scatter_kws=&#123;<span class="string">&#x27;s&#x27;</span>: <span class="number">200</span>&#125;)</span><br><span class="line">ax.<span class="built_in">set</span>(xlabel=<span class="string">&#x27;Year&#x27;</span>, ylabel=<span class="string">&#x27;Total Immigration&#x27;</span>)</span><br><span class="line">ax.set_title(<span class="string">&#x27;Total Immigration to Canada from 1980 - 2013&#x27;</span>)</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20201229174319526.png#pic_center"></p><h2 id="Waffle-charts"><a href="#Waffle-charts" class="headerlink" title="Waffle charts"></a>Waffle charts</h2><p>写到这里写到死机，然后忘保存了 :( :( :(<br>为了防止这样的情况再次发生，以及(暂时)懒得重新修辞和组合语句，就另开一篇博客放上没仔细修改的原notebook，链接<a href="https://ycchen00.github.io/2021/02/04/DSci/Visualization/Matplotlib%E5%8D%8E%E5%A4%AB%E9%A5%BC%E5%9B%BE(Waffle%20Charts)%E6%95%99%E7%A8%8B/">here</a> 有时间会重新组织下语言</p><h2 id="Word-Clouds"><a href="#Word-Clouds" class="headerlink" title="Word Clouds"></a>Word Clouds</h2><p>:( :( :( 链接<a href="https://ycchen00.github.io/2021/02/04/DSci/Visualization/WordClouds%E8%AF%8D%E4%BA%91%E6%95%99%E7%A8%8B(DVwP%E7%AC%94%E8%AE%B0)/">here</a> 有时间会重新组织下语言</p><h2 id="Folium"><a href="#Folium" class="headerlink" title="Folium"></a>Folium</h2><p>For there are so many contents for Folium, so I will open a new bolg <a href="https://ycchen00.github.io/2021/02/04/DSci/Visualization/Folium%E6%95%99%E7%A8%8B(DVwP%E7%AC%94%E8%AE%B0)/">here</a>.</p></div><div><div><div style="text-align:center;color:#555;font-size:20px">------------------ &emsp; The End &emsp;<i class="fas fa-cat"></i>&emsp; Thanks for reading &emsp; ------------------</div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者： </strong>买猫咪的小鱼干</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="https://ycchen00.github.io/2021/03/27/DSci/DataFrame%E7%9A%84%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0(DVwP%E7%AC%94%E8%AE%B0)/" title="Pandas | DataFrame的常用函数">https://ycchen00.github.io/2021/03/27/DSci/DataFrame的常用函数(DVwP笔记)/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/DataScience/" rel="tag"><i class="fas fa-fish"></i> DataScience</a> <a href="/tags/Pandas/" rel="tag"><i class="fas fa-fish"></i> Pandas</a> <a href="/tags/DataFrame/" rel="tag"><i class="fas fa-fish"></i> DataFrame</a></div><div class="post-nav"><div class="post-nav-item"><a href="/2021/03/27/Coursera/Intro2DS/Quiz+Assignment1-4/" rel="prev" title="Coursera | Introduction to Data Science in Python（University of Michigan）| Quiz和Assignment1-4答案"><i class="fa fa-chevron-left"></i> Coursera | Introduction to Data Science in Python（University of Michigan）| Quiz和Assignment1-4答案</a></div><div class="post-nav-item"><a href="/2021/03/27/Coursera/SQL4DS/Assignment/" rel="next" title="Coursera | Databases and SQL for Data Science (IBM) | Assignment">Coursera | Databases and SQL for Data Science (IBM) | Assignment <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments"><div id="disqus_thread"><noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript></div></div><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><div><canvas id="canvas" style="width:60%">当前浏览器不支持canvas，请更换浏览器后再试</canvas></div><script>!function(){var o,a,r,f,t,i=[[[0,0,1,1,1,0,0],[0,1,1,0,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,0,1,1,0],[0,0,1,1,1,0,0]],[[0,0,0,1,1,0,0],[0,1,1,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[1,1,1,1,1,1,1]],[[0,1,1,1,1,1,0],[1,1,0,0,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,1,1,0],[0,0,0,1,1,0,0],[0,0,1,1,0,0,0],[0,1,1,0,0,0,0],[1,1,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1],[0,0,0,0,0,1,1],[0,0,0,0,1,1,0],[0,0,0,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,1,1,0],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0]],[[0,0,0,0,1,1,0],[0,0,0,1,1,1,0],[0,0,1,1,1,1,0],[0,1,1,0,1,1,0],[1,1,0,0,1,1,0],[1,1,1,1,1,1,1],[0,0,0,0,1,1,0],[0,0,0,0,1,1,0],[0,0,0,0,1,1,0],[0,0,0,1,1,1,1]],[[1,1,1,1,1,1,1],[1,1,0,0,0,0,0],[1,1,0,0,0,0,0],[1,1,1,1,1,1,0],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0]],[[0,0,0,0,1,1,0],[0,0,1,1,0,0,0],[0,1,1,0,0,0,0],[1,1,0,0,0,0,0],[1,1,0,1,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0]],[[1,1,1,1,1,1,1],[1,1,0,0,0,1,1],[0,0,0,0,1,1,0],[0,0,0,0,1,1,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,1,1,0,0,0],[0,0,1,1,0,0,0],[0,0,1,1,0,0,0],[0,0,1,1,0,0,0]],[[0,1,1,1,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0]],[[0,1,1,1,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,1,1,0],[0,0,0,1,1,0,0],[0,1,1,0,0,0,0]],[[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0]]],e=document.getElementById("canvas");function h(t,e){for(var n=[1,2,3],l=["#3BE","#09C","#A6C","#93C","#9C0","#690","#FB3","#F80","#F44","#C00"],o=0;o<i[e].length;o++)for(var a,h=0;h<i[e][o].length;h++)1==i[e][o][h]&&(a={x:14*(f+2)*t+2*h*(f+1)+(f+1),y:2*o*(f+1)+(f+1),stepX:Math.floor(4*Math.random()-2),stepY:-2*n[Math.floor(Math.random()*n.length)],color:l[Math.floor(Math.random()*l.length)],disY:1},r.push(a))}function n(){e.height=100;for(var t=0;t<a.length;t++)!function(t,e){for(var n=0;n<i[e].length;n++)for(var l=0;l<i[e][n].length;l++)1==i[e][n][l]&&(o.beginPath(),o.arc(14*(f+2)*t+2*l*(f+1)+(f+1),2*n*(f+1)+(f+1),f,0,2*Math.PI),o.closePath(),o.fill())}(t,a[t]);for(t=0;t<r.length;t++)o.beginPath(),o.arc(r[t].x,r[t].y,f,0,2*Math.PI),o.fillStyle=r[t].color,o.closePath(),o.fill()}e.getContext&&(o=e.getContext("2d"),e.height=100,e.width=700,o.fillStyle="#f00",o.fillRect(10,10,50,50),a=[],r=[],f=e.height/20-1,t=/(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date),a.push(t[1],t[2],10,t[3],t[4],10,t[5],t[6]),clearInterval(void 0),setInterval(function(){!function(){var t=[],e=/(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date),n=[];n.push(e[1],e[2],10,e[3],e[4],10,e[5],e[6]);for(var l=a.length-1;0<=l;l--)n[l]!==a[l]&&t.push(l+"_"+(Number(a[l])+1)%10);for(l=0;l<t.length;l++)h.apply(this,t[l].split("_"));a=n.concat()}(),function(){for(var t=0;t<r.length;t++)r[t].stepY+=r[t].disY,r[t].x+=r[t].stepX,r[t].y+=r[t].stepY,(r[t].x>700+f||r[t].y>100+f)&&(r.splice(t,1),t--)}(),n()},50))}()</script><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#DataFrame"><span class="nav-text">DataFrame</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Read-in-data"><span class="nav-text">Read in data</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#View-the-top-5-rows"><span class="nav-text">View the top 5 rows</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Veiw-the-bottom-5-rows"><span class="nav-text">Veiw the bottom 5 rows</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Get-a-summary-of-dataframe"><span class="nav-text">Get a summary of dataframe</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Get-the-list-of-column-headers"><span class="nav-text">Get the list of column headers</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Get-the-list-of-indicies"><span class="nav-text">Get the list of indicies</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Get-the-index-and-columns-as-lists"><span class="nav-text">Get the index and columns as lists</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#View-the-dimensions-of-the-dataframe"><span class="nav-text">View the dimensions of the dataframe</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Remove-columns"><span class="nav-text">Remove columns</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Rename-columns"><span class="nav-text">Rename columns</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Add-a-column-that-sums-up-the-total-columns"><span class="nav-text">Add a column that sums up the total columns</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#See-how-many-null-objects"><span class="nav-text">See how many null objects</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Get-a-quick-summary-of-each-column"><span class="nav-text">Get a quick summary of each column</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Set-index"><span class="nav-text">Set index</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Select-column"><span class="nav-text">Select column</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Select-row"><span class="nav-text">Select row</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Sort-on-a-column"><span class="nav-text">Sort on a column</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Convert-the-column-names-into-strings"><span class="nav-text">Convert the column names into strings</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Filtering-based-on-a-criteria"><span class="nav-text">Filtering based on a criteria</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Transpose-the-dataframe"><span class="nav-text">Transpose the dataframe</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Groupby"><span class="nav-text">Groupby</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#polyfit"><span class="nav-text">polyfit()</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Visualization"><span class="nav-text">Visualization</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Colors-available"><span class="nav-text">Colors available</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Two-types-of-plotting"><span class="nav-text">Two types of plotting</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Subplots"><span class="nav-text">Subplots</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Prepping-Data"><span class="nav-text">Prepping Data</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%93"><span class="nav-text">——————————————————————–</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Line-plots"><span class="nav-text">Line plots</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Area-plots"><span class="nav-text">Area plots</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Histrograms"><span class="nav-text">Histrograms</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Bar-charts"><span class="nav-text">Bar charts</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Annotate"><span class="nav-text">Annotate</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pie-charts"><span class="nav-text">Pie charts</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Box-plots"><span class="nav-text">Box plots</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Scatter-plots"><span class="nav-text">Scatter plots</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Bubble-plots"><span class="nav-text">Bubble plots</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Seaborn-Regression-plots"><span class="nav-text">Seaborn - Regression plots</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Waffle-charts"><span class="nav-text">Waffle charts</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Word-Clouds"><span class="nav-text">Word Clouds</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Folium"><span class="nav-text">Folium</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="买猫咪的小鱼干" src="/images/avatar_blackRainbow.jpg"><p class="site-author-name" itemprop="name">买猫咪的小鱼干</p><div class="site-description" itemprop="description">overthinker</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">71</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">33</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">52</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/ycchen00" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ycchen00" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:cyc348674274@gmail.com" title="E-Mail → mailto:cyc348674274@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a> </span><span class="links-of-author-item"><a href="https://blog.csdn.net/weixin_43360896" title="CSDN → https:&#x2F;&#x2F;blog.csdn.net&#x2F;weixin_43360896" rel="noopener" target="_blank"><i class="fas fa-crosshairs fa-fw"></i>CSDN</a> </span><span class="links-of-author-item"><a href="https://twitter.com/cyc86908399" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;cyc86908399" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a></span></div><div class="cc-license motion-element" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div><div class="links-of-blogroll motion-element links-of-blogroll-block"><div class="links-of-blogroll-title"><i class="fa fa-history fa-" aria-hidden="true"></i> 近期文章</div><ul class="links-of-blogroll-list"><li><a href="/2021/05/12/Travel/Hubei/" title="湖北三人游" target="_blank">湖北三人游</a></li><li><a href="/2021/03/27/Tip/%E4%BD%B3%E8%83%BD(EOS%20750D)_USB%E6%97%A0%E6%B3%95%E8%BF%9E%E6%8E%A5%E7%94%B5%E8%84%91/" title="Tip | 佳能(EOS 750D) USB无法连接电脑" target="_blank">Tip | 佳能(EOS 750D) USB无法连接电脑</a></li><li><a href="/2021/03/27/Tip/%E7%AE%A1%E7%90%86%E5%91%98CMD_%E5%BF%AB%E6%8D%B7%E9%94%AE/" title="Tip | 管理员权限打开CMD 快捷键" target="_blank">Tip | 管理员权限打开CMD 快捷键</a></li><li><a href="/2021/03/27/Travel/Yunnan/" title="云南旅游" target="_blank">云南旅游</a></li><li><a href="/2021/03/27/Tip/Git%E5%A4%8D%E5%88%B6%E7%B2%98%E8%B4%B4_%E5%BF%AB%E6%8D%B7%E9%94%AE/" title="Tip | Git复制粘贴 快捷键" target="_blank">Tip | Git复制粘贴 快捷键</a></li></ul></div><script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script><script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script><div class="widget-wrap"><div id="myCanvasContainer" class="widget tagcloud"><canvas width="250" height="250" id="resCanvas" style="width:100%"><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Business/" rel="tag">Business</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Colab/" rel="tag">Colab</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Coursera/" rel="tag">Coursera</a><span class="tag-list-count">26</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Data-analytics/" rel="tag">Data analytics</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DataFrame/" rel="tag">DataFrame</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DataScience/" rel="tag">DataScience</a><span class="tag-list-count">32</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Debug/" rel="tag">Debug</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Excel/" rel="tag">Excel</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Folium/" rel="tag">Folium</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GPU/" rel="tag">GPU</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GRE/" rel="tag">GRE</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Google/" rel="tag">Google</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Google-Earth-Engine/" rel="tag">Google Earth Engine</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jupyter-Notebook/" rel="tag">Jupyter Notebook</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Machine-learning/" rel="tag">Machine learning</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Markdown/" rel="tag">Markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Matplotlib/" rel="tag">Matplotlib</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OneNote/" rel="tag">OneNote</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pandas/" rel="tag">Pandas</a><span class="tag-list-count">18</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PayPal/" rel="tag">PayPal</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Photography/" rel="tag">Photography</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Remote-sensing/" rel="tag">Remote sensing</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL/" rel="tag">SQL</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Seaborn/" rel="tag">Seaborn</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Travel/" rel="tag">Travel</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Visualization/" rel="tag">Visualization</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Waffle-Charts/" rel="tag">Waffle Charts</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows/" rel="tag">Windows</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cmd/" rel="tag">cmd</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cmder/" rel="tag">cmder</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/crawler/" rel="tag">crawler</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iPhone/" rel="tag">iPhone</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/json/" rel="tag">json</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pip/" rel="tag">pip</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shortcuts/" rel="tag">shortcuts</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wordcloud/" rel="tag">wordcloud</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" rel="tag">个人博客</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%BD%E6%B1%9F/" rel="tag">丽江</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%91%E5%8D%97/" rel="tag">云南</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%87%BA%E5%9B%BD/" rel="tag">出国</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%A7%E7%90%86/" rel="tag">大理</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%81%A9%E6%96%BD/" rel="tag">恩施</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E5%AD%A6/" rel="tag">数学</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%98%86%E6%98%8E/" rel="tag">昆明</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B9%96%E5%8C%97/" rel="tag">湖北</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6/" rel="tag">离散数学</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%8B%B1%E8%AF%AD/" rel="tag">英语</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B0%83%E9%85%92/" rel="tag">调酒</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9A%8F%E7%AC%94/" rel="tag">随笔</a><span class="tag-list-count">1</span></li></ul></canvas></div></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; 2020 – <span itemprop="copyrightYear">2021</span> <span class="with-love"><i class="fas fa-fish"></i> </span><span class="author" itemprop="copyrightHolder">买猫咪的小鱼干</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-chart-area"></i> </span><span title="站点总字数">367k</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="站点阅读时长">5:34</span></div><script color="0,0,0" opacity="0.5" zindex="-1" count="150" src="https://cdn.jsdelivr.net/npm/canvas-nest.js@1/dist/canvas-nest.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span><script>var now=new Date;function createtime(){var n=new Date("10/18/2020 20:20:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="本站已安全运行 "+dnum+" 天 ",document.getElementById("times").innerHTML=hnum+" 小时 "+mnum+" 分 "+snum+" 秒"}setInterval("createtime()",250)</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>(function() {
    function leancloudSelector(url) {
      url = encodeURI(url);
      return document.getElementById(url).querySelector('.leancloud-visitors-count');
    }

    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = decodeURI(visitors.id);
      var title = visitors.dataset.flagTitle;

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url })))
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
            leancloudSelector(url).innerText = counter.time + 1;
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              });
          } else {
              leancloudSelector(url).innerText = 'Counter not initialized! More info at console err msg.';
              console.error('ATTENTION! LeanCloud counter has security bug, see how to solve it here: https://github.com/theme-next/hexo-leancloud-counter-security. \n However, you can still use LeanCloud without security, by setting `security` option to `false`.');
            
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return decodeURI(element.id);
      });

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url: { '$in': entries } })))
        .then(response => response.json())
        .then(({ results }) => {
          for (let url of entries) {
            let target = results.find(item => item.url === url);
            leancloudSelector(url).innerText = target ? target.time : 0;
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    let { app_id, app_key, server_url } = {"enable":true,"app_id":null,"app_key":null,"server_url":null,"security":true};
    function fetchData(api_server) {
      var Counter = (method, url, data) => {
        return fetch(`${api_server}/1.1${url}`, {
          method,
          headers: {
            'X-LC-Id'     : app_id,
            'X-LC-Key'    : app_key,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    }

    let api_server = app_id.slice(-9) !== '-MdYXbMMI' ? server_url : `https://${app_id.slice(0, 8).toLowerCase()}.api.lncldglobal.com`;

    if (api_server) {
      fetchData(api_server);
    } else {
      fetch('https://app-router.leancloud.cn/2/route?appId=' + app_id)
        .then(response => response.json())
        .then(({ api_server }) => {
          fetchData('https://' + api_server);
        });
    }
  })();</script></div></footer></div><script src="/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script defer src="/lib/three/three.min.js"></script><script>!function(){var e,t,o,n,r=document.getElementsByTagName("link");if(0<r.length)for(i=0;i<r.length;i++)"canonical"==r[i].rel.toLowerCase()&&r[i].href&&(e=r[i].href);t=(e||window.location.protocol).split(":")[0],e=e||window.location.href,window,o=e,n=document.referrer,/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi.test(o)||(t="https"===String(t).toLowerCase()?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif",n?(t+="?r="+encodeURIComponent(document.referrer),o&&(t+="&l="+o)):o&&(t+="?l="+o),(new Image).src=t)}()</script><script src="/js/local-search.js"></script><script>function loadCount(){var d=document,n=d.createElement("script");n.src="https://ycchen00.disqus.com/count.js",n.id="dsq-count-scr",(d.head||d.body).appendChild(n)}window.addEventListener("load",loadCount,!1)</script><script>var disqus_config = function() {
    this.page.url = "https://ycchen00.github.io/2021/03/27/DSci/DataFrame%E7%9A%84%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0(DVwP%E7%AC%94%E8%AE%B0)/";
    this.page.identifier = "2021/03/27/DSci/DataFrame的常用函数(DVwP笔记)/";
    this.page.title = "Pandas | DataFrame的常用函数";
    };
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://ycchen00.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });</script><script type="text/javascript" src="/js/coreSocialistValues.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,model:{jsonPath:"/live2dw/assets/hijiki.model.json"},display:{position:"left",width:150,height:300},mobile:{show:!1},log:!1})</script></body></html>