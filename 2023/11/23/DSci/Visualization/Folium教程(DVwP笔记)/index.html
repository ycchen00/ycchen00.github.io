<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/icons8-%E7%8C%AB-32-4.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/icons8-%E7%8C%AB-16-4.ico"><link rel="mask-icon" href="/images/logo.svg" color="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fonts.loli.net/css?family=EB Garamond:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css"><script src="/lib/pace/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"ycchen00.github.io",root:"/",scheme:"Gemini",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!1},bookmark:{enable:!0,color:"#222",save:"auto"},fancybox:!0,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="Folium基础教程，同DVwP笔记~"><meta property="og:type" content="article"><meta property="og:title" content="Folium | Tutorials"><meta property="og:url" content="https://ycchen00.github.io/2023/11/23/DSci/Visualization/Folium%E6%95%99%E7%A8%8B(DVwP%E7%AC%94%E8%AE%B0)/index.html"><meta property="og:site_name" content="猫咪的小鱼干"><meta property="og:description" content="Folium基础教程，同DVwP笔记~"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://s3-api.us-geo.objectstorage.softlayer.net/cf-courses-data/CognitiveClass/DV0101EN/labs/coursera/Images/2000_census_population_density_map_by_state.png"><meta property="article:published_time" content="2023-11-23T20:15:19.609Z"><meta property="article:modified_time" content="2023-11-23T20:15:19.609Z"><meta property="article:author" content="买猫咪的小鱼干"><meta property="article:tag" content="DataScience"><meta property="article:tag" content="Visualization"><meta property="article:tag" content="Folium"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://s3-api.us-geo.objectstorage.softlayer.net/cf-courses-data/CognitiveClass/DV0101EN/labs/coursera/Images/2000_census_population_density_map_by_state.png"><link rel="canonical" href="https://ycchen00.github.io/2023/11/23/DSci/Visualization/Folium%E6%95%99%E7%A8%8B(DVwP%E7%AC%94%E8%AE%B0)/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><script>window.addEventListener('DOMContentLoaded', () => {
    'use strict';
    
      if (NexT.utils.hasMobileUA()) return;
    
    let time, hidden, visible, title = document.title;
    let favicon = document.querySelector('link[rel="icon"]');
    
      hidden = '╭(°A°`)╮猫咪出门啦~';
      visible = 'o(=•ェ•=)m猫咪又回来啦~';
    
    let random = t => t[Math.floor(Math.random() * t.length)];
    const change = () => {
      if (document.hidden) {
        favicon.setAttribute('href', '/images/icons8-猫屁股-16.png');
        
          document.title = hidden;
        
        clearTimeout(time);
      } else {
        favicon.setAttribute('href', '/images/icons8-猫-16-4.ico');
        
          document.title = visible;
        
        time = setTimeout(() => {
          document.title = title;
        }, 2020);
      }
    }
    document.addEventListener('visibilitychange', change, false);
  });</script><title>Folium | Tutorials | 猫咪的小鱼干</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="猫咪的小鱼干" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">猫咪的小鱼干</h1><span class="logo-line-after"><i></i></span></a></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-movies"><a href="/movies/" rel="section"><i class="fas fa-film fa-fw"></i>观影</a></li><li class="menu-item menu-item-books"><a href="/books/" rel="section"><i class="fas fa-book fa-fw"></i>阅读</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class="reading-progress-bar"></div><a role="button" class="book-mark-link book-mark-link-fixed"></a> <a href="https://github.com/ycchen00" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://ycchen00.github.io/2023/11/23/DSci/Visualization/Folium%E6%95%99%E7%A8%8B(DVwP%E7%AC%94%E8%AE%B0)/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar_blackRainbow.jpg"><meta itemprop="name" content="买猫咪的小鱼干"><meta itemprop="description" content="overthinker"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="猫咪的小鱼干"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Folium | Tutorials<a href="https://github.com/ycchen00/ycchen00.github.io/tree/hexo/source/_posts/DSci/Visualization/Folium%E6%95%99%E7%A8%8B(DVwP%E7%AC%94%E8%AE%B0).md" class="post-edit-link" title="编辑" rel="noopener" target="_blank"><i class="fa fa-pencil-alt"></i></a></h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2023-11-23 15:15:19" itemprop="dateCreated datePublished" datetime="2023-11-23T15:15:19-05:00">2023-11-23</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/DSci/" itemprop="url" rel="index"><span itemprop="name">DSci</span></a> </span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/DSci/Visualization/" itemprop="url" rel="index"><span itemprop="name">Visualization</span></a> </span></span><span id="/2023/11/23/DSci/Visualization/Folium%E6%95%99%E7%A8%8B(DVwP%E7%AC%94%E8%AE%B0)/" class="post-meta-item leancloud_visitors" data-flag-title="Folium | Tutorials" title="热度"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">热度：</span> <span class="leancloud-visitors-count"></span> <span>℃</span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Disqus：</span> <a title="disqus" href="/2023/11/23/DSci/Visualization/Folium%E6%95%99%E7%A8%8B(DVwP%E7%AC%94%E8%AE%B0)/#disqus_thread" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2023/11/23/DSci/Visualization/Folium教程(DVwP笔记)/" itemprop="commentCount"></span></a></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>17k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>16 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>more about <a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43360896/article/details/111874473">Pandas入门 DataFrame的常用函数</a></p><h1 id="Generating-Maps-with-Python"><a href="#Generating-Maps-with-Python" class="headerlink" title="Generating Maps with Python"></a>Generating Maps with Python</h1><h2 id="Objectives"><a href="#Objectives" class="headerlink" title="Objectives"></a>Objectives</h2><p>After completing this lab you will be able to:</p><ul><li>Visualize geospatial data with Folium</li></ul><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>In this lab, we will learn how to create maps for different objectives. To do that, we will part ways with Matplotlib and work with another Python visualization library, namely <strong>Folium</strong>. What is nice about <strong>Folium</strong> is that it was developed for the sole purpose of visualizing geospatial data. While other libraries are available to visualize geospatial data, such as <strong>plotly</strong>, they might have a cap on how many API calls you can make within a defined time frame. <strong>Folium</strong>, on the other hand, is completely free.</p><h2 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h2><div class="alert alert-block alert-info" style="margin-top:20px"><ol><li><a href="#0">Exploring Datasets with _p_andas</a><br></li><li><a href="#2">Downloading and Prepping Data</a><br></li><li><a href="#4">Introduction to Folium</a><br></li><li><a href="#6">Map with Markers</a><br></li><li><a href="#8">Choropleth Maps</a><br></li></ol></div><hr><h1 id="Exploring-Datasets-with-pandas-and-Matplotlib"><a href="#Exploring-Datasets-with-pandas-and-Matplotlib" class="headerlink" title="Exploring Datasets with pandas and Matplotlib"></a>Exploring Datasets with <em>pandas</em> and Matplotlib<a id="0"></a></h1><p>Toolkits: This lab heavily relies on <a target="_blank" rel="noopener" href="http://pandas.pydata.org/?cm_mmc=Email_Newsletter-_-Developer_Ed+Tech-_-WW_WW-_-SkillsNetwork-Courses-IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork-20297740&cm_mmca1=000026UJ&cm_mmca2=10006555&cm_mmca3=M12345678&cvosrc=email.Newsletter.M12345678&cvo_campaign=000026UJ&cm_mmc=Email_Newsletter-_-Developer_Ed+Tech-_-WW_WW-_-SkillsNetwork-Courses-IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork-20297740&cm_mmca1=000026UJ&cm_mmca2=10006555&cm_mmca3=M12345678&cvosrc=email.Newsletter.M12345678&cvo_campaign=000026UJ"><em>pandas</em></a> and <a target="_blank" rel="noopener" href="http://www.numpy.org/?cm_mmc=Email_Newsletter-_-Developer_Ed+Tech-_-WW_WW-_-SkillsNetwork-Courses-IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork-20297740&cm_mmca1=000026UJ&cm_mmca2=10006555&cm_mmca3=M12345678&cvosrc=email.Newsletter.M12345678&cvo_campaign=000026UJ&cm_mmc=Email_Newsletter-_-Developer_Ed+Tech-_-WW_WW-_-SkillsNetwork-Courses-IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork-20297740&cm_mmca1=000026UJ&cm_mmca2=10006555&cm_mmca3=M12345678&cvosrc=email.Newsletter.M12345678&cvo_campaign=000026UJ"><strong>Numpy</strong></a> for data wrangling, analysis, and visualization. The primary plotting library we will explore in this lab is <a target="_blank" rel="noopener" href="https://github.com/python-visualization/folium/"><strong>Folium</strong></a>.</p><p>Datasets:</p><ol><li><p>San Francisco Police Department Incidents for the year 2016 - <a target="_blank" rel="noopener" href="https://data.sfgov.org/Public-Safety/Police-Department-Incidents-Previous-Year-2016-/ritf-b9ki?cm_mmc=Email_Newsletter-_-Developer_Ed+Tech-_-WW_WW-_-SkillsNetwork-Courses-IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork-20297740&cm_mmca1=000026UJ&cm_mmca2=10006555&cm_mmca3=M12345678&cvosrc=email.Newsletter.M12345678&cvo_campaign=000026UJ">Police Department Incidents</a> from San Francisco public data portal. Incidents derived from San Francisco Police Department (SFPD) Crime Incident Reporting system. Updated daily, showing data for the entire year of 2016. Address and location has been anonymized by moving to mid-block or to an intersection.</p></li><li><p>Immigration to Canada from 1980 to 2013 - <a target="_blank" rel="noopener" href="http://www.un.org/en/development/desa/population/migration/data/empirical2/migrationflows.shtml?cm_mmc=Email_Newsletter-_-Developer_Ed+Tech-_-WW_WW-_-SkillsNetwork-Courses-IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork-20297740&cm_mmca1=000026UJ&cm_mmca2=10006555&cm_mmca3=M12345678&cvosrc=email.Newsletter.M12345678&cvo_campaign=000026UJ">International migration flows to and from selected countries - The 2015 revision</a> from United Nation’s website. The dataset contains annual data on the flows of international migrants as recorded by the countries of destination. The data presents both inflows and outflows according to the place of birth, citizenship or place of previous / next residence both for foreigners and nationals. For this lesson, we will focus on the Canadian Immigration data</p></li></ol><h1 id="Downloading-and-Prepping-Data"><a href="#Downloading-and-Prepping-Data" class="headerlink" title="Downloading and Prepping Data "></a>Downloading and Prepping Data <a id="2"></a></h1><p>Import Primary Modules:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np  <span class="comment"># useful for many scientific computing in Python</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd <span class="comment"># primary data structure library</span></span><br></pre></td></tr></table></figure><h1 id="Introduction-to-Folium"><a href="#Introduction-to-Folium" class="headerlink" title="Introduction to Folium "></a>Introduction to Folium <a id="4"></a></h1><p>Folium is a powerful Python library that helps you create several types of Leaflet maps. The fact that the Folium results are interactive makes this library very useful for dashboard building.</p><p>From the official Folium documentation page:</p><blockquote><p>Folium builds on the data wrangling strengths of the Python ecosystem and the mapping strengths of the Leaflet.js library. Manipulate your data in Python, then visualize it in on a Leaflet map via Folium.</p></blockquote><blockquote><p>Folium makes it easy to visualize data that’s been manipulated in Python on an interactive Leaflet map. It enables both the binding of data to a map for choropleth visualizations as well as passing Vincent/Vega visualizations as markers on the map.</p></blockquote><blockquote><p>The library has a number of built-in tilesets from OpenStreetMap, Mapbox, and Stamen, and supports custom tilesets with Mapbox or Cloudmade API keys. Folium supports both GeoJSON and TopoJSON overlays, as well as the binding of data to those overlays to create choropleth maps with color-brewer color schemes.</p></blockquote><h4 id="Let’s-install-Folium"><a href="#Let’s-install-Folium" class="headerlink" title="Let’s install Folium"></a>Let’s install <strong>Folium</strong></h4><p><strong>Folium</strong> is not available by default. So, we first need to install it before we are able to import it.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># !conda install -c conda-forge folium=0.5.0 --yes</span></span><br><span class="line"><span class="comment"># !pip install folium</span></span><br><span class="line"><span class="keyword">import</span> folium</span><br><span class="line"></span><br><span class="line">print(<span class="string">&#x27;Folium installed and imported!&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">folium.Map(location=[<span class="number">-40.4637</span>, <span class="number">-3.7492</span>], zoom_start=<span class="number">6</span>, tiles=<span class="string">&#x27;Stamen Toner&#x27;</span>)</span><br></pre></td></tr></table></figure><p>Generating the world map is straigtforward in <strong>Folium</strong>. You simply create a <strong>Folium</strong> <em>Map</em> object and then you display it. What is attactive about <strong>Folium</strong> maps is that they are interactive, so you can zoom into any region of interest despite the initial zoom level.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># define the world map</span></span><br><span class="line">world_map = folium.Map()</span><br><span class="line"></span><br><span class="line"><span class="comment"># display world map</span></span><br><span class="line">world_map</span><br></pre></td></tr></table></figure><p>Go ahead. Try zooming in and out of the rendered map above.</p><p>You can customize this default definition of the world map by specifying the centre of your map and the intial zoom level.</p><p>All locations on a map are defined by their respective <em>Latitude</em> and <em>Longitude</em> values. So you can create a map and pass in a center of <em>Latitude</em> and <em>Longitude</em> values of <strong>[0, 0]</strong>.</p><p>For a defined center, you can also define the intial zoom level into that location when the map is rendered. <strong>The higher the zoom level the more the map is zoomed into the center</strong>.</p><p>Let’s create a map centered around Canada and play with the zoom level to see how it affects the rendered map.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># define the world map centered around Canada with a low zoom level</span></span><br><span class="line">world_map = folium.Map(location=[<span class="number">56.130</span>, <span class="number">-106.35</span>], zoom_start=<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># display world map</span></span><br><span class="line">world_map</span><br></pre></td></tr></table></figure><p>Let’s create the map again with a higher zoom level</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># define the world map centered around Canada with a higher zoom level</span></span><br><span class="line">world_map = folium.Map(location=[<span class="number">56.130</span>, <span class="number">-106.35</span>], zoom_start=<span class="number">8</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># display world map</span></span><br><span class="line">world_map</span><br></pre></td></tr></table></figure><p>As you can see, the higher the zoom level the more the map is zoomed into the given center.</p><p><strong>Question</strong>: Create a map of Mexico with a zoom level of 4.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### type your answer here</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#define Mexico&#x27;s geolocation coordinates</span></span><br><span class="line">mexico_latitude = <span class="number">23.6345</span> </span><br><span class="line">mexico_longitude = <span class="number">-102.5528</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># define the world map centered around Canada with a higher zoom level</span></span><br><span class="line">mexico_map = folium.Map(location=[mexico_latitude, mexico_longitude], zoom_start=<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># display world map</span></span><br><span class="line">mexico_map</span><br></pre></td></tr></table></figure><details><summary>Click here for a sample python solution</summary><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#The correct answer is:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#define Mexico&#x27;s geolocation coordinates</span></span><br><span class="line">mexico_latitude = <span class="number">23.6345</span> </span><br><span class="line">mexico_longitude = <span class="number">-102.5528</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># define the world map centered around Canada with a higher zoom level</span></span><br><span class="line">mexico_map = folium.Map(location=[mexico_latitude, mexico_longitude], zoom_start=<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># display world map</span></span><br><span class="line">mexico_map</span><br><span class="line"></span><br></pre></td></tr></table></figure></details><p>Another cool feature of <strong>Folium</strong> is that you can generate different map styles.</p><h3 id="A-Stamen-Toner-Maps"><a href="#A-Stamen-Toner-Maps" class="headerlink" title="A. Stamen Toner Maps"></a>A. Stamen Toner Maps</h3><p>These are high-contrast B+W (black and white) maps. They are perfect for data mashups and exploring river meanders and coastal zones.</p><p>Let’s create a Stamen Toner map of canada with a zoom level of 4.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># create a Stamen Toner map of the world centered around Canada</span></span><br><span class="line">world_map = folium.Map(location=[<span class="number">56.130</span>, <span class="number">-106.35</span>], zoom_start=<span class="number">4</span>, tiles=<span class="string">&#x27;Stamen Toner&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># display map</span></span><br><span class="line">world_map</span><br></pre></td></tr></table></figure><p>Feel free to zoom in and out to see how this style compares to the default one.</p><h3 id="B-Stamen-Terrain-Maps"><a href="#B-Stamen-Terrain-Maps" class="headerlink" title="B. Stamen Terrain Maps"></a>B. Stamen Terrain Maps</h3><p>These are maps that feature hill shading and natural vegetation colors. They showcase advanced labeling and linework generalization of dual-carriageway roads.</p><p>Let’s create a Stamen Terrain map of Canada with zoom level 4.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># create a Stamen Toner map of the world centered around Canada</span></span><br><span class="line">world_map = folium.Map(location=[<span class="number">56.130</span>, <span class="number">-106.35</span>], zoom_start=<span class="number">4</span>, tiles=<span class="string">&#x27;Stamen Terrain&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># display map</span></span><br><span class="line">world_map</span><br></pre></td></tr></table></figure><p>Feel free to zoom in and out to see how this style compares to Stamen Toner and the default style.</p><p>Zoom in and notice how the borders start showing as you zoom in, and the displayed country names are in English.</p><p><strong>Question</strong>: Create a map of Mexico to visualize its hill shading and natural vegetation. Use a zoom level of 6.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### type your answer here</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#define Mexico&#x27;s geolocation coordinates</span></span><br><span class="line">mexico_latitude = <span class="number">23.6345</span> </span><br><span class="line">mexico_longitude = <span class="number">-102.5528</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># define the world map centered around Canada with a higher zoom level</span></span><br><span class="line">mexico_map = folium.Map(location=[mexico_latitude, mexico_longitude], zoom_start=<span class="number">6</span>, tiles=<span class="string">&#x27;Stamen Terrain&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># display world map</span></span><br><span class="line">mexico_map</span><br></pre></td></tr></table></figure><details><summary>Click here for a sample python solution</summary><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#The correct answer is:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#define Mexico&#x27;s geolocation coordinates</span></span><br><span class="line">mexico_latitude = <span class="number">23.6345</span> </span><br><span class="line">mexico_longitude = <span class="number">-102.5528</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># define the world map centered around Canada with a higher zoom level</span></span><br><span class="line">mexico_map = folium.Map(location=[mexico_latitude, mexico_longitude], zoom_start=<span class="number">6</span>, tiles=<span class="string">&#x27;Stamen Terrain&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># display world map</span></span><br><span class="line">mexico_map</span><br><span class="line"></span><br></pre></td></tr></table></figure></details><h1 id="Maps-with-Markers"><a href="#Maps-with-Markers" class="headerlink" title="Maps with Markers "></a>Maps with Markers <a id="6"></a></h1><p>Let’s download and import the data on police department incidents using <em>pandas</em> <code>read_csv()</code> method.</p><p>Download the dataset and read it into a <em>pandas</em> dataframe:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">df_incidents = pd.read_csv(<span class="string">&#x27;https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork/Data%20Files/Police_Department_Incidents_-_Previous_Year__2016_.csv&#x27;</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">&#x27;Dataset downloaded and read into a pandas dataframe!&#x27;</span>)</span><br></pre></td></tr></table></figure><p>Let’s take a look at the first five items in our dataset.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_incidents.head()</span><br></pre></td></tr></table></figure><p>So each row consists of 13 features:</p><blockquote><ol><li><strong>IncidntNum</strong>: Incident Number</li><li><strong>Category</strong>: Category of crime or incident</li><li><strong>Descript</strong>: Description of the crime or incident</li><li><strong>DayOfWeek</strong>: The day of week on which the incident occurred</li><li><strong>Date</strong>: The Date on which the incident occurred</li><li><strong>Time</strong>: The time of day on which the incident occurred</li><li><strong>PdDistrict</strong>: The police department district</li><li><strong>Resolution</strong>: The resolution of the crime in terms whether the perpetrator was arrested or not</li><li><strong>Address</strong>: The closest address to where the incident took place</li><li><strong>X</strong>: The longitude value of the crime location</li><li><strong>Y</strong>: The latitude value of the crime location</li><li><strong>Location</strong>: A tuple of the latitude and the longitude values</li><li><strong>PdId</strong>: The police department ID</li></ol></blockquote><p>Let’s find out how many entries there are in our dataset.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_incidents.shape</span><br></pre></td></tr></table></figure><p>So the dataframe consists of 150,500 crimes, which took place in the year 2016. In order to reduce computational cost, let’s just work with the first 100 incidents in this dataset.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># get the first 100 crimes in the df_incidents dataframe</span></span><br><span class="line">limit = <span class="number">100</span></span><br><span class="line">df_incidents = df_incidents.iloc[<span class="number">0</span>:limit, :]</span><br></pre></td></tr></table></figure><p>Let’s confirm that our dataframe now consists only of 100 crimes.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_incidents.shape</span><br></pre></td></tr></table></figure><p>Now that we reduced the data a little bit, let’s visualize where these crimes took place in the city of San Francisco. We will use the default style and we will initialize the zoom level to 12.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># San Francisco latitude and longitude values</span></span><br><span class="line">latitude = <span class="number">37.77</span></span><br><span class="line">longitude = <span class="number">-122.42</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># create map and display it</span></span><br><span class="line">sanfran_map = folium.Map(location=[latitude, longitude], zoom_start=<span class="number">12</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># display the map of San Francisco</span></span><br><span class="line">sanfran_map</span><br></pre></td></tr></table></figure><p>Now let’s superimpose the locations of the crimes onto the map. The way to do that in <strong>Folium</strong> is to create a <em>feature group</em> with its own features and style and then add it to the sanfran_map.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># instantiate a feature group for the incidents in the dataframe</span></span><br><span class="line">incidents = folium.<span class="built_in">map</span>.FeatureGroup()</span><br><span class="line"></span><br><span class="line"><span class="comment"># loop through the 100 crimes and add each to the incidents feature group</span></span><br><span class="line"><span class="keyword">for</span> lat, lng, <span class="keyword">in</span> <span class="built_in">zip</span>(df_incidents.Y, df_incidents.X):</span><br><span class="line">    incidents.add_child(</span><br><span class="line">        folium.CircleMarker(</span><br><span class="line">            [lat, lng],</span><br><span class="line">            radius=<span class="number">5</span>, <span class="comment"># define how big you want the circle markers to be</span></span><br><span class="line">            color=<span class="string">&#x27;yellow&#x27;</span>,</span><br><span class="line">            fill=<span class="literal">True</span>,</span><br><span class="line">            fill_color=<span class="string">&#x27;blue&#x27;</span>,</span><br><span class="line">            fill_opacity=<span class="number">0.6</span></span><br><span class="line">        )</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"><span class="comment"># add incidents to map</span></span><br><span class="line">sanfran_map.add_child(incidents)</span><br></pre></td></tr></table></figure><p>You can also add some pop-up text that would get displayed when you hover over a marker. Let’s make each marker display the category of the crime when hovered over.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># instantiate a feature group for the incidents in the dataframe</span></span><br><span class="line">incidents = folium.<span class="built_in">map</span>.FeatureGroup()</span><br><span class="line"></span><br><span class="line"><span class="comment"># loop through the 100 crimes and add each to the incidents feature group</span></span><br><span class="line"><span class="keyword">for</span> lat, lng, <span class="keyword">in</span> <span class="built_in">zip</span>(df_incidents.Y, df_incidents.X):</span><br><span class="line">    incidents.add_child(</span><br><span class="line">        folium.CircleMarker(</span><br><span class="line">            [lat, lng],</span><br><span class="line">            radius=<span class="number">5</span>, <span class="comment"># define how big you want the circle markers to be</span></span><br><span class="line">            color=<span class="string">&#x27;yellow&#x27;</span>,</span><br><span class="line">            fill=<span class="literal">True</span>,</span><br><span class="line">            fill_color=<span class="string">&#x27;blue&#x27;</span>,</span><br><span class="line">            fill_opacity=<span class="number">0.6</span></span><br><span class="line">        )</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"><span class="comment"># add pop-up text to each marker on the map</span></span><br><span class="line">latitudes = <span class="built_in">list</span>(df_incidents.Y)</span><br><span class="line">longitudes = <span class="built_in">list</span>(df_incidents.X)</span><br><span class="line">labels = <span class="built_in">list</span>(df_incidents.Category)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> lat, lng, label <span class="keyword">in</span> <span class="built_in">zip</span>(latitudes, longitudes, labels):</span><br><span class="line">    folium.Marker([lat, lng], popup=label).add_to(sanfran_map)    </span><br><span class="line">    </span><br><span class="line"><span class="comment"># add incidents to map</span></span><br><span class="line">sanfran_map.add_child(incidents)</span><br></pre></td></tr></table></figure><p>Isn’t this really cool? Now you are able to know what crime category occurred at each marker.</p><p>If you find the map to be so congested will all these markers, there are two remedies to this problem. The simpler solution is to remove these location markers and just add the text to the circle markers themselves as follows:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># create map and display it</span></span><br><span class="line">sanfran_map = folium.Map(location=[latitude, longitude], zoom_start=<span class="number">12</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># loop through the 100 crimes and add each to the map</span></span><br><span class="line"><span class="keyword">for</span> lat, lng, label <span class="keyword">in</span> <span class="built_in">zip</span>(df_incidents.Y, df_incidents.X, df_incidents.Category):</span><br><span class="line">    folium.CircleMarker(</span><br><span class="line">        [lat, lng],</span><br><span class="line">        radius=<span class="number">5</span>, <span class="comment"># define how big you want the circle markers to be</span></span><br><span class="line">        color=<span class="string">&#x27;yellow&#x27;</span>,</span><br><span class="line">        fill=<span class="literal">True</span>,</span><br><span class="line">        popup=label,</span><br><span class="line">        fill_color=<span class="string">&#x27;blue&#x27;</span>,</span><br><span class="line">        fill_opacity=<span class="number">0.6</span></span><br><span class="line">    ).add_to(sanfran_map)</span><br><span class="line"></span><br><span class="line"><span class="comment"># show map</span></span><br><span class="line">sanfran_map</span><br></pre></td></tr></table></figure><p>The other proper remedy is to group the markers into different clusters. Each cluster is then represented by the number of crimes in each neighborhood. These clusters can be thought of as pockets of San Francisco which you can then analyze separately.</p><p>To implement this, we start off by instantiating a <em>MarkerCluster</em> object and adding all the data points in the dataframe to this object.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> folium <span class="keyword">import</span> plugins</span><br><span class="line"></span><br><span class="line"><span class="comment"># let&#x27;s start again with a clean copy of the map of San Francisco</span></span><br><span class="line">sanfran_map = folium.Map(location = [latitude, longitude], zoom_start = <span class="number">12</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># instantiate a mark cluster object for the incidents in the dataframe</span></span><br><span class="line">incidents = plugins.MarkerCluster().add_to(sanfran_map)</span><br><span class="line"></span><br><span class="line"><span class="comment"># loop through the dataframe and add each data point to the mark cluster</span></span><br><span class="line"><span class="keyword">for</span> lat, lng, label, <span class="keyword">in</span> <span class="built_in">zip</span>(df_incidents.Y, df_incidents.X, df_incidents.Category):</span><br><span class="line">    folium.Marker(</span><br><span class="line">        location=[lat, lng],</span><br><span class="line">        icon=<span class="literal">None</span>,</span><br><span class="line">        popup=label,</span><br><span class="line">    ).add_to(incidents)</span><br><span class="line"></span><br><span class="line"><span class="comment"># display map</span></span><br><span class="line">sanfran_map</span><br></pre></td></tr></table></figure><p>Notice how when you zoom out all the way, all markers are grouped into one cluster, <em>the global cluster</em>, of 100 markers or crimes, which is the total number of crimes in our dataframe. Once you start zooming in, the <em>global cluster</em> will start breaking up into smaller clusters. Zooming in all the way will result in individual markers.</p><h1 id="Choropleth-Maps"><a href="#Choropleth-Maps" class="headerlink" title="Choropleth Maps "></a>Choropleth Maps <a id="8"></a></h1><p>A <code>Choropleth</code> map is a thematic map in which areas are shaded or patterned in proportion to the measurement of the statistical variable being displayed on the map, such as population density or per-capita income. The choropleth map provides an easy way to visualize how a measurement varies across a geographic area or it shows the level of variability within a region. Below is a <code>Choropleth</code> map of the US depicting the population by square mile per state.</p><img src="https://s3-api.us-geo.objectstorage.softlayer.net/cf-courses-data/CognitiveClass/DV0101EN/labs/coursera/Images/2000_census_population_density_map_by_state.png" width="600"><p>Now, let’s create our own <code>Choropleth</code> map of the world depicting immigration from various countries to Canada.</p><p>Let’s first download and import our primary Canadian immigration dataset using <em>pandas</em> <code>read_excel()</code> method. Normally, before we can do that, we would need to download a module which <em>pandas</em> requires to read in excel files. This module is <strong>xlrd</strong>. For your convenience, we have pre-installed this module, so you would not have to worry about that. Otherwise, you would need to run the following line of code to install the <strong>xlrd</strong> module:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!conda install -c anaconda xlrd --yes</span><br></pre></td></tr></table></figure><p>Download the dataset and read it into a <em>pandas</em> dataframe:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">df_can = pd.read_excel(<span class="string">&#x27;https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork/Data%20Files/Canada.xlsx&#x27;</span>,</span><br><span class="line">                     sheet_name=<span class="string">&#x27;Canada by Citizenship&#x27;</span>,</span><br><span class="line">                     skiprows=<span class="built_in">range</span>(<span class="number">20</span>),</span><br><span class="line">                     skipfooter=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">&#x27;Data downloaded and read into a dataframe!&#x27;</span>)</span><br></pre></td></tr></table></figure><p>Let’s take a look at the first five items in our dataset.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_can.head()</span><br></pre></td></tr></table></figure><p>Let’s find out how many entries there are in our dataset.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># print the dimensions of the dataframe</span></span><br><span class="line">print(df_can.shape)</span><br></pre></td></tr></table></figure><p>Clean up data. We will make some modifications to the original dataset to make it easier to create our visualizations. Refer to <em>Introduction to Matplotlib and Line Plots</em> and <em>Area Plots, Histograms, and Bar Plots</em> notebooks for a detailed description of this preprocessing.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># clean up the dataset to remove unnecessary columns (eg. REG) </span></span><br><span class="line">df_can.drop([<span class="string">&#x27;AREA&#x27;</span>,<span class="string">&#x27;REG&#x27;</span>,<span class="string">&#x27;DEV&#x27;</span>,<span class="string">&#x27;Type&#x27;</span>,<span class="string">&#x27;Coverage&#x27;</span>], axis=<span class="number">1</span>, inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># let&#x27;s rename the columns so that they make sense</span></span><br><span class="line">df_can.rename(columns=&#123;<span class="string">&#x27;OdName&#x27;</span>:<span class="string">&#x27;Country&#x27;</span>, <span class="string">&#x27;AreaName&#x27;</span>:<span class="string">&#x27;Continent&#x27;</span>,<span class="string">&#x27;RegName&#x27;</span>:<span class="string">&#x27;Region&#x27;</span>&#125;, inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># for sake of consistency, let&#x27;s also make all column labels of type string</span></span><br><span class="line">df_can.columns = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">str</span>, df_can.columns))</span><br><span class="line"></span><br><span class="line"><span class="comment"># add total column</span></span><br><span class="line">df_can[<span class="string">&#x27;Total&#x27;</span>] = df_can.<span class="built_in">sum</span>(axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># years that we will be using in this lesson - useful for plotting later on</span></span><br><span class="line">years = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">str</span>, <span class="built_in">range</span>(<span class="number">1980</span>, <span class="number">2014</span>)))</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&#x27;data dimensions:&#x27;</span>, df_can.shape)</span><br></pre></td></tr></table></figure><p>Let’s take a look at the first five items of our cleaned dataframe.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_can.head()</span><br></pre></td></tr></table></figure><p>In order to create a <code>Choropleth</code> map, we need a GeoJSON file that defines the areas/boundaries of the state, county, or country that we are interested in. In our case, since we are endeavoring to create a world map, we want a GeoJSON that defines the boundaries of all world countries. For your convenience, we will be providing you with this file, so let’s go ahead and download it. Let’s name it <strong>world_countries.json</strong>.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># download countries geojson file</span></span><br><span class="line">!wget --quiet https://cf-courses-data.s3.us.cloud-<span class="built_in">object</span>-storage.appdomain.cloud/IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork/Data%<span class="number">20</span>Files/world_countries.json</span><br><span class="line">    </span><br><span class="line">print(<span class="string">&#x27;GeoJSON file downloaded!&#x27;</span>)</span><br></pre></td></tr></table></figure><p>Now that we have the GeoJSON file, let’s create a world map, centered around <strong>[0, 0]</strong> <em>latitude</em> and <em>longitude</em> values, with an intial zoom level of 2.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">world_geo = <span class="string">r&#x27;world_countries.json&#x27;</span> <span class="comment"># geojson file</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># create a plain world map</span></span><br><span class="line">world_map = folium.Map(location=[<span class="number">0</span>, <span class="number">0</span>], zoom_start=<span class="number">2</span>)</span><br></pre></td></tr></table></figure><p>And now to create a <code>Choropleth</code> map, we will use the <em>choropleth</em> method with the following main parameters:</p><ol><li>geo_data, which is the GeoJSON file.</li><li>data, which is the dataframe containing the data.</li><li>columns, which represents the columns in the dataframe that will be used to create the <code>Choropleth</code> map.</li><li>key_on, which is the key or variable in the GeoJSON file that contains the name of the variable of interest. To determine that, you will need to open the GeoJSON file using any text editor and note the name of the key or variable that contains the name of the countries, since the countries are our variable of interest. In this case, <strong>name</strong> is the key in the GeoJSON file that contains the name of the countries. Note that this key is case_sensitive, so you need to pass exactly as it exists in the GeoJSON file.</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># generate choropleth map using the total immigration of each country to Canada from 1980 to 2013</span></span><br><span class="line">world_map.choropleth(</span><br><span class="line">    geo_data=world_geo,</span><br><span class="line">    data=df_can,</span><br><span class="line">    columns=[<span class="string">&#x27;Country&#x27;</span>, <span class="string">&#x27;Total&#x27;</span>],</span><br><span class="line">    key_on=<span class="string">&#x27;feature.properties.name&#x27;</span>,</span><br><span class="line">    fill_color=<span class="string">&#x27;YlOrRd&#x27;</span>, </span><br><span class="line">    fill_opacity=<span class="number">0.7</span>, </span><br><span class="line">    line_opacity=<span class="number">0.2</span>,</span><br><span class="line">    legend_name=<span class="string">&#x27;Immigration to Canada&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># display map</span></span><br><span class="line">world_map</span><br></pre></td></tr></table></figure><p>As per our <code>Choropleth</code> map legend, the darker the color of a country and the closer the color to red, the higher the number of immigrants from that country. Accordingly, the highest immigration over the course of 33 years (from 1980 to 2013) was from China, India, and the Philippines, followed by Poland, Pakistan, and interestingly, the US.</p><p>Notice how the legend is displaying a negative boundary or threshold. Let’s fix that by defining our own thresholds and starting with 0 instead of -6,918!</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">world_geo = <span class="string">r&#x27;world_countries.json&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># create a numpy array of length 6 and has linear spacing from the minium total immigration to the maximum total immigration</span></span><br><span class="line">threshold_scale = np.linspace(df_can[<span class="string">&#x27;Total&#x27;</span>].<span class="built_in">min</span>(),</span><br><span class="line">                              df_can[<span class="string">&#x27;Total&#x27;</span>].<span class="built_in">max</span>(),</span><br><span class="line">                              <span class="number">6</span>, dtype=<span class="built_in">int</span>)</span><br><span class="line">threshold_scale = threshold_scale.tolist() <span class="comment"># change the numpy array to a list</span></span><br><span class="line">threshold_scale[<span class="number">-1</span>] = threshold_scale[<span class="number">-1</span>] + <span class="number">1</span> <span class="comment"># make sure that the last value of the list is greater than the maximum immigration</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># let Folium determine the scale.</span></span><br><span class="line">world_map = folium.Map(location=[<span class="number">0</span>, <span class="number">0</span>], zoom_start=<span class="number">2</span>)</span><br><span class="line">world_map.choropleth(</span><br><span class="line">    geo_data=world_geo,</span><br><span class="line">    data=df_can,</span><br><span class="line">    columns=[<span class="string">&#x27;Country&#x27;</span>, <span class="string">&#x27;Total&#x27;</span>],</span><br><span class="line">    key_on=<span class="string">&#x27;feature.properties.name&#x27;</span>,</span><br><span class="line">    threshold_scale=threshold_scale,</span><br><span class="line">    fill_color=<span class="string">&#x27;YlOrRd&#x27;</span>, </span><br><span class="line">    fill_opacity=<span class="number">0.7</span>, </span><br><span class="line">    line_opacity=<span class="number">0.2</span>,</span><br><span class="line">    legend_name=<span class="string">&#x27;Immigration to Canada&#x27;</span>,</span><br><span class="line">    reset=<span class="literal">True</span></span><br><span class="line">)</span><br><span class="line">world_map</span><br></pre></td></tr></table></figure><p>Much better now! Feel free to play around with the data and perhaps create <code>Choropleth</code> maps for individuals years, or perhaps decades, and see how they compare with the entire period from 1980 to 2013.</p></div><div><div><div style="text-align:center;color:#555;font-size:20px">------------------ &emsp; The End &emsp;<i class="fas fa-cat"></i>&emsp; Thanks for reading &emsp; ------------------</div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者： </strong>买猫咪的小鱼干</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="https://ycchen00.github.io/2023/11/23/DSci/Visualization/Folium%E6%95%99%E7%A8%8B(DVwP%E7%AC%94%E8%AE%B0)/" title="Folium | Tutorials">https://ycchen00.github.io/2023/11/23/DSci/Visualization/Folium教程(DVwP笔记)/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/DataScience/" rel="tag"><i class="fas fa-fish"></i> DataScience</a> <a href="/tags/Visualization/" rel="tag"><i class="fas fa-fish"></i> Visualization</a> <a href="/tags/Folium/" rel="tag"><i class="fas fa-fish"></i> Folium</a></div><div class="post-nav"><div class="post-nav-item"><a href="/2023/11/23/DSci/SQL/SQL+Python%20API%E7%9B%B8%E5%85%B3%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B(SQL4DS%E7%AC%94%E8%AE%B0)/" rel="prev" title="SQL | SQL+Python API相关入门教程"><i class="fa fa-chevron-left"></i> SQL | SQL+Python API相关入门教程</a></div><div class="post-nav-item"><a href="/2023/11/23/DSci/Visualization/Matplotlib%E5%8D%8E%E5%A4%AB%E9%A5%BC%E5%9B%BE(Waffle%20Charts)%E6%95%99%E7%A8%8B/" rel="next" title="Matplotlib | 华夫饼图 Waffle Charts">Matplotlib | 华夫饼图 Waffle Charts <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments"><div id="disqus_thread"><noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript></div></div><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><div><canvas id="canvas" style="width:60%">当前浏览器不支持canvas，请更换浏览器后再试</canvas></div><script>!function(){var o,a,r,f,t,i=[[[0,0,1,1,1,0,0],[0,1,1,0,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,0,1,1,0],[0,0,1,1,1,0,0]],[[0,0,0,1,1,0,0],[0,1,1,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[1,1,1,1,1,1,1]],[[0,1,1,1,1,1,0],[1,1,0,0,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,1,1,0],[0,0,0,1,1,0,0],[0,0,1,1,0,0,0],[0,1,1,0,0,0,0],[1,1,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1],[0,0,0,0,0,1,1],[0,0,0,0,1,1,0],[0,0,0,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,1,1,0],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0]],[[0,0,0,0,1,1,0],[0,0,0,1,1,1,0],[0,0,1,1,1,1,0],[0,1,1,0,1,1,0],[1,1,0,0,1,1,0],[1,1,1,1,1,1,1],[0,0,0,0,1,1,0],[0,0,0,0,1,1,0],[0,0,0,0,1,1,0],[0,0,0,1,1,1,1]],[[1,1,1,1,1,1,1],[1,1,0,0,0,0,0],[1,1,0,0,0,0,0],[1,1,1,1,1,1,0],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0]],[[0,0,0,0,1,1,0],[0,0,1,1,0,0,0],[0,1,1,0,0,0,0],[1,1,0,0,0,0,0],[1,1,0,1,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0]],[[1,1,1,1,1,1,1],[1,1,0,0,0,1,1],[0,0,0,0,1,1,0],[0,0,0,0,1,1,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,1,1,0,0,0],[0,0,1,1,0,0,0],[0,0,1,1,0,0,0],[0,0,1,1,0,0,0]],[[0,1,1,1,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0]],[[0,1,1,1,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,1,1,0],[0,0,0,1,1,0,0],[0,1,1,0,0,0,0]],[[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0]]],e=document.getElementById("canvas");function h(t,e){for(var n=[1,2,3],l=["#3BE","#09C","#A6C","#93C","#9C0","#690","#FB3","#F80","#F44","#C00"],o=0;o<i[e].length;o++)for(var a,h=0;h<i[e][o].length;h++)1==i[e][o][h]&&(a={x:14*(f+2)*t+2*h*(f+1)+(f+1),y:2*o*(f+1)+(f+1),stepX:Math.floor(4*Math.random()-2),stepY:-2*n[Math.floor(Math.random()*n.length)],color:l[Math.floor(Math.random()*l.length)],disY:1},r.push(a))}function n(){e.height=100;for(var t=0;t<a.length;t++)!function(t,e){for(var n=0;n<i[e].length;n++)for(var l=0;l<i[e][n].length;l++)1==i[e][n][l]&&(o.beginPath(),o.arc(14*(f+2)*t+2*l*(f+1)+(f+1),2*n*(f+1)+(f+1),f,0,2*Math.PI),o.closePath(),o.fill())}(t,a[t]);for(t=0;t<r.length;t++)o.beginPath(),o.arc(r[t].x,r[t].y,f,0,2*Math.PI),o.fillStyle=r[t].color,o.closePath(),o.fill()}e.getContext&&(o=e.getContext("2d"),e.height=100,e.width=700,o.fillStyle="#f00",o.fillRect(10,10,50,50),a=[],r=[],f=e.height/20-1,t=/(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date),a.push(t[1],t[2],10,t[3],t[4],10,t[5],t[6]),clearInterval(void 0),setInterval(function(){!function(){var t=[],e=/(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date),n=[];n.push(e[1],e[2],10,e[3],e[4],10,e[5],e[6]);for(var l=a.length-1;0<=l;l--)n[l]!==a[l]&&t.push(l+"_"+(Number(a[l])+1)%10);for(l=0;l<t.length;l++)h.apply(this,t[l].split("_"));a=n.concat()}(),function(){for(var t=0;t<r.length;t++)r[t].stepY+=r[t].disY,r[t].x+=r[t].stepX,r[t].y+=r[t].stepY,(r[t].x>700+f||r[t].y>100+f)&&(r.splice(t,1),t--)}(),n()},50))}()</script><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Generating-Maps-with-Python"><span class="nav-text">Generating Maps with Python</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Objectives"><span class="nav-text">Objectives</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Introduction"><span class="nav-text">Introduction</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Table-of-Contents"><span class="nav-text">Table of Contents</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Exploring-Datasets-with-pandas-and-Matplotlib"><span class="nav-text">Exploring Datasets with pandas and Matplotlib</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Downloading-and-Prepping-Data"><span class="nav-text">Downloading and Prepping Data</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Introduction-to-Folium"><span class="nav-text">Introduction to Folium</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Let%E2%80%99s-install-Folium"><span class="nav-text">Let’s install Folium</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#A-Stamen-Toner-Maps"><span class="nav-text">A. Stamen Toner Maps</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#B-Stamen-Terrain-Maps"><span class="nav-text">B. Stamen Terrain Maps</span></a></li></ol><li class="nav-item nav-level-1"><a class="nav-link" href="#Maps-with-Markers"><span class="nav-text">Maps with Markers</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Choropleth-Maps"><span class="nav-text">Choropleth Maps</span></a></li></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="买猫咪的小鱼干" src="/images/avatar_blackRainbow.jpg"><p class="site-author-name" itemprop="name">买猫咪的小鱼干</p><div class="site-description" itemprop="description">overthinker</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">72</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">34</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">54</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/ycchen00" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ycchen00" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:cyc348674274@gmail.com" title="E-Mail → mailto:cyc348674274@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a> </span><span class="links-of-author-item"><a href="https://blog.csdn.net/weixin_43360896" title="CSDN → https:&#x2F;&#x2F;blog.csdn.net&#x2F;weixin_43360896" rel="noopener" target="_blank"><i class="fas fa-crosshairs fa-fw"></i>CSDN</a> </span><span class="links-of-author-item"><a href="https://twitter.com/cyc86908399" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;cyc86908399" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a></span></div><div class="cc-license motion-element" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div><div class="links-of-blogroll motion-element links-of-blogroll-block"><div class="links-of-blogroll-title"><i class="fa fa-history fa-" aria-hidden="true"></i> 近期文章</div><ul class="links-of-blogroll-list"><li><a href="/2023/11/23/CFA%20level%201/" title="CFA level 1 总结" target="_blank">CFA level 1 总结</a></li><li><a href="/2023/11/23/Travel/Yunnan/" title="云南旅游" target="_blank">云南旅游</a></li><li><a href="/2023/11/23/Travel/Hubei/" title="湖北三人游" target="_blank">湖北三人游</a></li><li><a href="/2023/11/23/Tip/%E7%AE%A1%E7%90%86%E5%91%98CMD_%E5%BF%AB%E6%8D%B7%E9%94%AE/" title="Tip | 管理员权限打开CMD 快捷键" target="_blank">Tip | 管理员权限打开CMD 快捷键</a></li><li><a href="/2023/11/23/Tip/%E4%BD%B3%E8%83%BD(EOS%20750D)_USB%E6%97%A0%E6%B3%95%E8%BF%9E%E6%8E%A5%E7%94%B5%E8%84%91/" title="Tip | 佳能(EOS 750D) USB无法连接电脑" target="_blank">Tip | 佳能(EOS 750D) USB无法连接电脑</a></li></ul></div><script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script><script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script><div class="widget-wrap"><div id="myCanvasContainer" class="widget tagcloud"><canvas width="250" height="250" id="resCanvas" style="width:100%"><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Business/" rel="tag">Business</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CFA/" rel="tag">CFA</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CFA-level-1/" rel="tag">CFA level 1</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Colab/" rel="tag">Colab</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Coursera/" rel="tag">Coursera</a><span class="tag-list-count">26</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Data-analytics/" rel="tag">Data analytics</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DataFrame/" rel="tag">DataFrame</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DataScience/" rel="tag">DataScience</a><span class="tag-list-count">32</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Debug/" rel="tag">Debug</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Excel/" rel="tag">Excel</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Folium/" rel="tag">Folium</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GPU/" rel="tag">GPU</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GRE/" rel="tag">GRE</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Google/" rel="tag">Google</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Google-Earth-Engine/" rel="tag">Google Earth Engine</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jupyter-Notebook/" rel="tag">Jupyter Notebook</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Machine-learning/" rel="tag">Machine learning</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Markdown/" rel="tag">Markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Matplotlib/" rel="tag">Matplotlib</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OneNote/" rel="tag">OneNote</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pandas/" rel="tag">Pandas</a><span class="tag-list-count">18</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PayPal/" rel="tag">PayPal</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Photography/" rel="tag">Photography</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Remote-sensing/" rel="tag">Remote sensing</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL/" rel="tag">SQL</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Seaborn/" rel="tag">Seaborn</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Travel/" rel="tag">Travel</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Visualization/" rel="tag">Visualization</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Waffle-Charts/" rel="tag">Waffle Charts</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows/" rel="tag">Windows</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cmd/" rel="tag">cmd</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cmder/" rel="tag">cmder</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/crawler/" rel="tag">crawler</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iPhone/" rel="tag">iPhone</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/json/" rel="tag">json</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pip/" rel="tag">pip</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shortcuts/" rel="tag">shortcuts</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wordcloud/" rel="tag">wordcloud</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" rel="tag">个人博客</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%BD%E6%B1%9F/" rel="tag">丽江</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%91%E5%8D%97/" rel="tag">云南</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%87%BA%E5%9B%BD/" rel="tag">出国</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%A7%E7%90%86/" rel="tag">大理</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%81%A9%E6%96%BD/" rel="tag">恩施</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E5%AD%A6/" rel="tag">数学</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%98%86%E6%98%8E/" rel="tag">昆明</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B9%96%E5%8C%97/" rel="tag">湖北</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6/" rel="tag">离散数学</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%8B%B1%E8%AF%AD/" rel="tag">英语</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B0%83%E9%85%92/" rel="tag">调酒</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9A%8F%E7%AC%94/" rel="tag">随笔</a><span class="tag-list-count">1</span></li></ul></canvas></div></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; 2020 – <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="fas fa-fish"></i> </span><span class="author" itemprop="copyrightHolder">买猫咪的小鱼干</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-chart-area"></i> </span><span title="站点总字数">369k</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="站点阅读时长">5:35</span></div><script color="0,0,0" opacity="0.5" zindex="-1" count="150" src="https://cdn.jsdelivr.net/npm/canvas-nest.js@1/dist/canvas-nest.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span><script>var now=new Date;function createtime(){var n=new Date("10/18/2020 20:20:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="本站已安全运行 "+dnum+" 天 ",document.getElementById("times").innerHTML=hnum+" 小时 "+mnum+" 分 "+snum+" 秒"}setInterval("createtime()",250)</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>(function() {
    function leancloudSelector(url) {
      url = encodeURI(url);
      return document.getElementById(url).querySelector('.leancloud-visitors-count');
    }

    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = decodeURI(visitors.id);
      var title = visitors.dataset.flagTitle;

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url })))
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
            leancloudSelector(url).innerText = counter.time + 1;
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              });
          } else {
              leancloudSelector(url).innerText = 'Counter not initialized! More info at console err msg.';
              console.error('ATTENTION! LeanCloud counter has security bug, see how to solve it here: https://github.com/theme-next/hexo-leancloud-counter-security. \n However, you can still use LeanCloud without security, by setting `security` option to `false`.');
            
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return decodeURI(element.id);
      });

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url: { '$in': entries } })))
        .then(response => response.json())
        .then(({ results }) => {
          for (let url of entries) {
            let target = results.find(item => item.url === url);
            leancloudSelector(url).innerText = target ? target.time : 0;
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    let { app_id, app_key, server_url } = {"enable":true,"app_id":null,"app_key":null,"server_url":null,"security":true};
    function fetchData(api_server) {
      var Counter = (method, url, data) => {
        return fetch(`${api_server}/1.1${url}`, {
          method,
          headers: {
            'X-LC-Id'     : app_id,
            'X-LC-Key'    : app_key,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    }

    let api_server = app_id.slice(-9) !== '-MdYXbMMI' ? server_url : `https://${app_id.slice(0, 8).toLowerCase()}.api.lncldglobal.com`;

    if (api_server) {
      fetchData(api_server);
    } else {
      fetch('https://app-router.leancloud.cn/2/route?appId=' + app_id)
        .then(response => response.json())
        .then(({ api_server }) => {
          fetchData('https://' + api_server);
        });
    }
  })();</script></div></footer></div><script src="/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script defer src="/lib/three/three.min.js"></script><script>!function(){var e,t,o,n,r=document.getElementsByTagName("link");if(0<r.length)for(i=0;i<r.length;i++)"canonical"==r[i].rel.toLowerCase()&&r[i].href&&(e=r[i].href);t=(e||window.location.protocol).split(":")[0],e=e||window.location.href,window,o=e,n=document.referrer,/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi.test(o)||(t="https"===String(t).toLowerCase()?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif",n?(t+="?r="+encodeURIComponent(document.referrer),o&&(t+="&l="+o)):o&&(t+="?l="+o),(new Image).src=t)}()</script><script src="/js/local-search.js"></script><script>function loadCount(){var d=document,n=d.createElement("script");n.src="https://ycchen00.disqus.com/count.js",n.id="dsq-count-scr",(d.head||d.body).appendChild(n)}window.addEventListener("load",loadCount,!1)</script><script>var disqus_config = function() {
    this.page.url = "https://ycchen00.github.io/2023/11/23/DSci/Visualization/Folium%E6%95%99%E7%A8%8B(DVwP%E7%AC%94%E8%AE%B0)/";
    this.page.identifier = "2023/11/23/DSci/Visualization/Folium教程(DVwP笔记)/";
    this.page.title = "Folium | Tutorials";
    };
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://ycchen00.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });</script><script type="text/javascript" src="/js/coreSocialistValues.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,model:{jsonPath:"/live2dw/assets/hijiki.model.json"},display:{position:"left",width:150,height:300},mobile:{show:!1},log:!1})</script></body></html>